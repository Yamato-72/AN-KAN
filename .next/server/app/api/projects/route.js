"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/projects/route";
exports.ids = ["app/api/projects/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = import("pg");;

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprojects%2Froute&page=%2Fapi%2Fprojects%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprojects%2Froute.js&appDir=C%3A%5CUsers%5CDELL%5CDesktop%5C%E4%BD%9C%E6%88%90%E3%82%A2%E3%83%97%E3%83%AA%5CAN-KAN%5Capps%5Cweb%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDELL%5CDesktop%5C%E4%BD%9C%E6%88%90%E3%82%A2%E3%83%97%E3%83%AA%5CAN-KAN%5Capps%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprojects%2Froute&page=%2Fapi%2Fprojects%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprojects%2Froute.js&appDir=C%3A%5CUsers%5CDELL%5CDesktop%5C%E4%BD%9C%E6%88%90%E3%82%A2%E3%83%97%E3%83%AA%5CAN-KAN%5Capps%5Cweb%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDELL%5CDesktop%5C%E4%BD%9C%E6%88%90%E3%82%A2%E3%83%97%E3%83%AA%5CAN-KAN%5Capps%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_DELL_Desktop_AN_KAN_apps_web_src_app_api_projects_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/projects/route.js */ \"(rsc)/./src/app/api/projects/route.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([C_Users_DELL_Desktop_AN_KAN_apps_web_src_app_api_projects_route_js__WEBPACK_IMPORTED_MODULE_3__]);\nC_Users_DELL_Desktop_AN_KAN_apps_web_src_app_api_projects_route_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/projects/route\",\n        pathname: \"/api/projects\",\n        filename: \"route\",\n        bundlePath: \"app/api/projects/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\DELL\\\\Desktop\\\\作成アプリ\\\\AN-KAN\\\\apps\\\\web\\\\src\\\\app\\\\api\\\\projects\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_DELL_Desktop_AN_KAN_apps_web_src_app_api_projects_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/projects/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9qZWN0cyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcHJvamVjdHMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZwcm9qZWN0cyUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNERUxMJTVDRGVza3RvcCU1QyVFNCVCRCU5QyVFNiU4OCU5MCVFMyU4MiVBMiVFMyU4MyU5NyVFMyU4MyVBQSU1Q0FOLUtBTiU1Q2FwcHMlNUN3ZWIlNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0RFTEwlNUNEZXNrdG9wJTVDJUU0JUJEJTlDJUU2JTg4JTkwJUUzJTgyJUEyJUUzJTgzJTk3JUUzJTgzJUFBJTVDQU4tS0FOJTVDYXBwcyU1Q3dlYiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDcUM7QUFDbEg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbi1rYW4td2ViLz8xN2FmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXERFTExcXFxcRGVza3RvcFxcXFzkvZzmiJDjgqLjg5fjg6pcXFxcQU4tS0FOXFxcXGFwcHNcXFxcd2ViXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHByb2plY3RzXFxcXHJvdXRlLmpzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9qZWN0cy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Byb2plY3RzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9wcm9qZWN0cy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXERFTExcXFxcRGVza3RvcFxcXFzkvZzmiJDjgqLjg5fjg6pcXFxcQU4tS0FOXFxcXGFwcHNcXFxcd2ViXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHByb2plY3RzXFxcXHJvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9wcm9qZWN0cy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprojects%2Froute&page=%2Fapi%2Fprojects%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprojects%2Froute.js&appDir=C%3A%5CUsers%5CDELL%5CDesktop%5C%E4%BD%9C%E6%88%90%E3%82%A2%E3%83%97%E3%83%AA%5CAN-KAN%5Capps%5Cweb%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDELL%5CDesktop%5C%E4%BD%9C%E6%88%90%E3%82%A2%E3%83%97%E3%83%AA%5CAN-KAN%5Capps%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/projects/route.js":
/*!***************************************!*\
  !*** ./src/app/api/projects/route.js ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.js\");\n/* harmony import */ var _app_api_utils_googleDrive__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/app/api/utils/googleDrive */ \"(rsc)/./src/app/api/utils/googleDrive.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_db__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_db__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const status = searchParams.get(\"status\");\n        const search = searchParams.get(\"search\");\n        const assigned_team_member = searchParams.get(\"assigned_team_member\");\n        const gfi = searchParams.get(\"gfi\");\n        console.log(\"=== Projects API Debug ===\");\n        console.log(\"gfi parameter:\", gfi);\n        console.log(\"status parameter:\", status);\n        console.log(\"assigned_team_member parameter:\", assigned_team_member);\n        let whereConditions = [];\n        let parameters = [];\n        // Status filter\n        if (status && status !== \"all\") {\n            whereConditions.push(`p.status = $${parameters.length + 1}`);\n            parameters.push(status);\n            console.log(\"Added status filter:\", status);\n        }\n        // Assigned team member filter (code)\n        if (assigned_team_member) {\n            whereConditions.push(`p.assigned_team_member = $${parameters.length + 1}`);\n            parameters.push(assigned_team_member);\n            console.log(\"Added team member filter:\", assigned_team_member);\n        }\n        // GFI filter\n        if (gfi === \"true\") {\n            whereConditions.push(`p.gfi = true`);\n            console.log(\"Added GFI filter: p.gfi = true\");\n        } else if (gfi === \"false\") {\n            whereConditions.push(`p.gfi = false`);\n            console.log(\"Added GFI filter: p.gfi = false\");\n        }\n        // Search filter\n        if (search) {\n            whereConditions.push(`(\r\n        LOWER(p.project_name) LIKE LOWER($${parameters.length + 1}) OR\r\n        LOWER(c.client_name) LIKE LOWER($${parameters.length + 2}) OR\r\n        LOWER(c.contact_person) LIKE LOWER($${parameters.length + 3}) OR\r\n        LOWER(c.email) LIKE LOWER($${parameters.length + 4}) OR\r\n        LOWER(p.remarks) LIKE LOWER($${parameters.length + 5}) OR\r\n        CAST(p.ad_number AS TEXT) LIKE $${parameters.length + 6}\r\n      )`);\n            const searchPattern = `%${search}%`;\n            parameters.push(searchPattern, searchPattern, searchPattern, searchPattern, searchPattern, searchPattern);\n            console.log(\"Added search filter:\", search);\n        }\n        const whereClause = whereConditions.length > 0 ? `WHERE ${whereConditions.join(\" AND \")}` : \"\";\n        const sql = `\r\n      SELECT DISTINCT \r\n        p.*,\r\n        s.name as assigned_team_member_name, \r\n        s.code as assigned_team_member_code,\r\n        c.client_name,\r\n        c.company_address,\r\n        c.phone_number,\r\n        c.contact_person,\r\n        c.email,\r\n        p.drive_folder_id,\r\n        p.drive_folder_link\r\n      FROM projects p\r\n      LEFT JOIN staff_members s ON p.assigned_team_member = s.code\r\n      LEFT JOIN clients c ON p.client_id = c.id\r\n      ${whereClause}\r\n      ORDER BY p.created_at DESC\r\n    `;\n        console.log(\"Final query:\", sql);\n        console.log(\"Parameters:\", parameters);\n        const { rows } = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(sql, parameters);\n        const projects = rows;\n        console.log(\"Query results count:\", projects.length);\n        // 重複防止: idでユニークにする\n        const uniqueProjects = projects.filter((project, index, self)=>index === self.findIndex((p)=>p.id === project.id));\n        console.log(\"Unique projects count:\", uniqueProjects.length);\n        console.log(\"=== Projects API Debug End ===\");\n        return Response.json(uniqueProjects);\n    } catch (error) {\n        console.error(\"Error fetching projects:\", error);\n        return Response.json({\n            error: \"Failed to fetch projects\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { ad_number, project_name, client_name, inquiry_date, remarks, product_number, installation_date, installation_contractor, delivery_date, assigned_team_member, company_address, address, phone_number, estimated_amount, contact_person, email } = body;\n        // 必須チェック\n        if (!ad_number || !project_name || !client_name || !inquiry_date) {\n            return Response.json({\n                error: \"AD番号、プロジェクト名、取引先名、問い合わせ日は必須です\"\n            }, {\n                status: 400\n            });\n        }\n        // AD番号は数字\n        if (isNaN(parseInt(ad_number))) {\n            return Response.json({\n                error: \"AD番号は数字で入力してください\"\n            }, {\n                status: 400\n            });\n        }\n        // 担当者コード変換（ID → code / code → code）\n        let assignedCode = null;\n        if (assigned_team_member) {\n            if (typeof assigned_team_member === \"number\") {\n                // id → code\n                const staffById = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`SELECT code FROM staff_members WHERE id = $1`, [\n                    assigned_team_member\n                ]);\n                if (staffById.rows.length > 0) {\n                    assignedCode = staffById.rows[0].code;\n                }\n            } else if (typeof assigned_team_member === \"string\" && assigned_team_member.match(/^[A-Z]$/)) {\n                const staffByCode = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`SELECT code FROM staff_members WHERE code = $1`, [\n                    assigned_team_member\n                ]);\n                if (staffByCode.rows.length > 0) {\n                    assignedCode = assigned_team_member;\n                }\n            }\n        }\n        // まずクライアントを探す or 作る\n        const existingClientRes = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\r\n      SELECT id FROM clients \r\n      WHERE client_name = $1\r\n        AND COALESCE(company_address, '') = COALESCE($2, '')\r\n        AND COALESCE(phone_number, '') = COALESCE($3, '')\r\n        AND COALESCE(contact_person, '') = COALESCE($4, '')\r\n        AND COALESCE(email, '') = COALESCE($5, '')\r\n      `, [\n            client_name,\n            company_address || \"\",\n            phone_number || \"\",\n            contact_person || \"\",\n            email || \"\"\n        ]);\n        let clientId;\n        if (existingClientRes.rows.length > 0) {\n            clientId = existingClientRes.rows[0].id;\n            await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\r\n        UPDATE clients \r\n        SET \r\n          company_address = $1,\r\n          phone_number = $2,\r\n          contact_person = $3,\r\n          email = $4,\r\n          updated_at = NOW()\r\n        WHERE id = $5\r\n        `, [\n                company_address || null,\n                phone_number || null,\n                contact_person || null,\n                email || null,\n                clientId\n            ]);\n        } else {\n            const insertedClient = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\r\n        INSERT INTO clients (\r\n          client_name,\r\n          company_address,\r\n          phone_number,\r\n          contact_person,\r\n          email\r\n        ) VALUES ($1, $2, $3, $4, $5)\r\n        RETURNING id\r\n        `, [\n                client_name,\n                company_address || null,\n                phone_number || null,\n                contact_person || null,\n                email || null\n            ]);\n            clientId = insertedClient.rows[0].id;\n        }\n        // プロジェクト登録\n        const insertedProject = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\r\n      INSERT INTO projects (\r\n        ad_number,\r\n        project_name,\r\n        client_id,\r\n        inquiry_date,\r\n        remarks,\r\n        product_number,\r\n        installation_date,\r\n        installation_contractor,\r\n        delivery_date,\r\n        assigned_team_member,\r\n        address,\r\n        estimated_amount,\r\n        status,\r\n        created_at,\r\n        updated_at\r\n      ) VALUES (\r\n        $1, $2, $3, $4, $5,\r\n        $6, $7, $8, $9, $10,\r\n        $11, $12, $13, NOW(), NOW()\r\n      )\r\n      RETURNING *\r\n      `, [\n            parseInt(ad_number),\n            project_name,\n            clientId,\n            inquiry_date,\n            remarks || null,\n            product_number || null,\n            installation_date || null,\n            installation_contractor || null,\n            delivery_date || null,\n            assignedCode,\n            address || null,\n            estimated_amount ? parseFloat(estimated_amount) : null,\n            \"リード\"\n        ]);\n        const project = insertedProject.rows[0];\n        // 活動ログ\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\r\n      INSERT INTO project_activities (project_id, activity_type, description)\r\n      VALUES ($1, $2, $3)\r\n      `, [\n            project.id,\n            \"project_created\",\n            `プロジェクト「${project_name}」が作成されました`\n        ]);\n        // Google Drive フォルダ作成\n        let driveFolderId = null;\n        let driveFolderLink = null;\n        try {\n            const folderName = `AD-${project.ad_number}`;\n            const driveResult = await (0,_app_api_utils_googleDrive__WEBPACK_IMPORTED_MODULE_1__.createGoogleDriveFolder)(folderName);\n            if (driveResult.success && driveResult.folderId && driveResult.webViewLink) {\n                driveFolderId = driveResult.folderId;\n                driveFolderLink = driveResult.webViewLink;\n                await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\r\n          UPDATE projects \r\n          SET \r\n            drive_folder_id = $1,\r\n            drive_folder_link = $2\r\n          WHERE id = $3\r\n          `, [\n                    driveFolderId,\n                    driveFolderLink,\n                    project.id\n                ]);\n                console.log(\"Google Drive folder created and saved to database:\", driveResult);\n            } else {\n                console.error(\"Google Drive folder creation failed:\", driveResult.error);\n            }\n        } catch (driveError) {\n            console.error(\"Google Drive integration error:\", driveError);\n        }\n        return Response.json(project);\n    } catch (error) {\n        console.error(\"Error creating project:\", error);\n        return Response.json({\n            error: \"プロジェクトの作成に失敗しました\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE() {\n    try {\n        const res = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`DELETE FROM projects`);\n        return Response.json({\n            message: \"全てのプロジェクトが削除されました\",\n            deletedCount: res.rowCount ?? null\n        });\n    } catch (error) {\n        console.error(\"Error deleting all projects:\", error);\n        return Response.json({\n            error: \"全てのプロジェクトの削除に失敗しました\"\n        }, {\n            status: 500\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHLENBQ1Qsc0RBQ0FzRDtZQUVKLE9BQU87Z0JBQ0x2RCxRQUFRc0IsS0FBSyxDQUNYLHdDQUNBaUMsWUFBWWpDLEtBQUs7WUFFckI7UUFDRixFQUFFLE9BQU9xQyxZQUFZO1lBQ25CM0QsUUFBUXNCLEtBQUssQ0FBQyxtQ0FBbUNxQztRQUNuRDtRQUVBLE9BQU92QyxTQUFTQyxJQUFJLENBQUNQO0lBQ3ZCLEVBQUUsT0FBT1EsT0FBTztRQUNkdEIsUUFBUXNCLEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDLE9BQU9GLFNBQVNDLElBQUksQ0FDbEI7WUFBRUMsT0FBTztRQUFtQixHQUM1QjtZQUFFM0IsUUFBUTtRQUFJO0lBRWxCO0FBQ0Y7QUFFTyxlQUFlaUU7SUFDcEIsSUFBSTtRQUNGLE1BQU1DLE1BQU0sTUFBTXpFLDhDQUFLQSxDQUFDLENBQUMsb0JBQW9CLENBQUM7UUFDOUMsT0FBT2dDLFNBQVNDLElBQUksQ0FBQztZQUNuQnlDLFNBQVM7WUFDVEMsY0FBY0YsSUFBSUcsUUFBUSxJQUFJO1FBQ2hDO0lBQ0YsRUFBRSxPQUFPMUMsT0FBTztRQUNkdEIsUUFBUXNCLEtBQUssQ0FBQyxnQ0FBZ0NBO1FBQzlDLE9BQU9GLFNBQVNDLElBQUksQ0FDbEI7WUFBRUMsT0FBTztRQUFzQixHQUMvQjtZQUFFM0IsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbi1rYW4td2ViLy4vc3JjL2FwcC9hcGkvcHJvamVjdHMvcm91dGUuanM/NDY4MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBxdWVyeSB9IGZyb20gXCJAL2xpYi9kYlwiO1xyXG5pbXBvcnQgeyBjcmVhdGVHb29nbGVEcml2ZUZvbGRlciB9IGZyb20gXCJAL2FwcC9hcGkvdXRpbHMvZ29vZ2xlRHJpdmVcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XHJcbiAgICBjb25zdCBzdGF0dXMgPSBzZWFyY2hQYXJhbXMuZ2V0KFwic3RhdHVzXCIpO1xyXG4gICAgY29uc3Qgc2VhcmNoID0gc2VhcmNoUGFyYW1zLmdldChcInNlYXJjaFwiKTtcclxuICAgIGNvbnN0IGFzc2lnbmVkX3RlYW1fbWVtYmVyID0gc2VhcmNoUGFyYW1zLmdldChcImFzc2lnbmVkX3RlYW1fbWVtYmVyXCIpO1xyXG4gICAgY29uc3QgZ2ZpID0gc2VhcmNoUGFyYW1zLmdldChcImdmaVwiKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIj09PSBQcm9qZWN0cyBBUEkgRGVidWcgPT09XCIpO1xyXG4gICAgY29uc29sZS5sb2coXCJnZmkgcGFyYW1ldGVyOlwiLCBnZmkpO1xyXG4gICAgY29uc29sZS5sb2coXCJzdGF0dXMgcGFyYW1ldGVyOlwiLCBzdGF0dXMpO1xyXG4gICAgY29uc29sZS5sb2coXCJhc3NpZ25lZF90ZWFtX21lbWJlciBwYXJhbWV0ZXI6XCIsIGFzc2lnbmVkX3RlYW1fbWVtYmVyKTtcclxuXHJcbiAgICBsZXQgd2hlcmVDb25kaXRpb25zID0gW107XHJcbiAgICBsZXQgcGFyYW1ldGVycyA9IFtdO1xyXG5cclxuICAgIC8vIFN0YXR1cyBmaWx0ZXJcclxuICAgIGlmIChzdGF0dXMgJiYgc3RhdHVzICE9PSBcImFsbFwiKSB7XHJcbiAgICAgIHdoZXJlQ29uZGl0aW9ucy5wdXNoKGBwLnN0YXR1cyA9ICQke3BhcmFtZXRlcnMubGVuZ3RoICsgMX1gKTtcclxuICAgICAgcGFyYW1ldGVycy5wdXNoKHN0YXR1cyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiQWRkZWQgc3RhdHVzIGZpbHRlcjpcIiwgc3RhdHVzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBc3NpZ25lZCB0ZWFtIG1lbWJlciBmaWx0ZXIgKGNvZGUpXHJcbiAgICBpZiAoYXNzaWduZWRfdGVhbV9tZW1iZXIpIHtcclxuICAgICAgd2hlcmVDb25kaXRpb25zLnB1c2goXHJcbiAgICAgICAgYHAuYXNzaWduZWRfdGVhbV9tZW1iZXIgPSAkJHtwYXJhbWV0ZXJzLmxlbmd0aCArIDF9YFxyXG4gICAgICApO1xyXG4gICAgICBwYXJhbWV0ZXJzLnB1c2goYXNzaWduZWRfdGVhbV9tZW1iZXIpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIkFkZGVkIHRlYW0gbWVtYmVyIGZpbHRlcjpcIiwgYXNzaWduZWRfdGVhbV9tZW1iZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdGSSBmaWx0ZXJcclxuICAgIGlmIChnZmkgPT09IFwidHJ1ZVwiKSB7XHJcbiAgICAgIHdoZXJlQ29uZGl0aW9ucy5wdXNoKGBwLmdmaSA9IHRydWVgKTtcclxuICAgICAgY29uc29sZS5sb2coXCJBZGRlZCBHRkkgZmlsdGVyOiBwLmdmaSA9IHRydWVcIik7XHJcbiAgICB9IGVsc2UgaWYgKGdmaSA9PT0gXCJmYWxzZVwiKSB7XHJcbiAgICAgIHdoZXJlQ29uZGl0aW9ucy5wdXNoKGBwLmdmaSA9IGZhbHNlYCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiQWRkZWQgR0ZJIGZpbHRlcjogcC5nZmkgPSBmYWxzZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTZWFyY2ggZmlsdGVyXHJcbiAgICBpZiAoc2VhcmNoKSB7XHJcbiAgICAgIHdoZXJlQ29uZGl0aW9ucy5wdXNoKGAoXHJcbiAgICAgICAgTE9XRVIocC5wcm9qZWN0X25hbWUpIExJS0UgTE9XRVIoJCR7cGFyYW1ldGVycy5sZW5ndGggKyAxfSkgT1JcclxuICAgICAgICBMT1dFUihjLmNsaWVudF9uYW1lKSBMSUtFIExPV0VSKCQke3BhcmFtZXRlcnMubGVuZ3RoICsgMn0pIE9SXHJcbiAgICAgICAgTE9XRVIoYy5jb250YWN0X3BlcnNvbikgTElLRSBMT1dFUigkJHtwYXJhbWV0ZXJzLmxlbmd0aCArIDN9KSBPUlxyXG4gICAgICAgIExPV0VSKGMuZW1haWwpIExJS0UgTE9XRVIoJCR7cGFyYW1ldGVycy5sZW5ndGggKyA0fSkgT1JcclxuICAgICAgICBMT1dFUihwLnJlbWFya3MpIExJS0UgTE9XRVIoJCR7cGFyYW1ldGVycy5sZW5ndGggKyA1fSkgT1JcclxuICAgICAgICBDQVNUKHAuYWRfbnVtYmVyIEFTIFRFWFQpIExJS0UgJCR7cGFyYW1ldGVycy5sZW5ndGggKyA2fVxyXG4gICAgICApYCk7XHJcblxyXG4gICAgICBjb25zdCBzZWFyY2hQYXR0ZXJuID0gYCUke3NlYXJjaH0lYDtcclxuICAgICAgcGFyYW1ldGVycy5wdXNoKFxyXG4gICAgICAgIHNlYXJjaFBhdHRlcm4sXHJcbiAgICAgICAgc2VhcmNoUGF0dGVybixcclxuICAgICAgICBzZWFyY2hQYXR0ZXJuLFxyXG4gICAgICAgIHNlYXJjaFBhdHRlcm4sXHJcbiAgICAgICAgc2VhcmNoUGF0dGVybixcclxuICAgICAgICBzZWFyY2hQYXR0ZXJuXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiQWRkZWQgc2VhcmNoIGZpbHRlcjpcIiwgc2VhcmNoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB3aGVyZUNsYXVzZSA9XHJcbiAgICAgIHdoZXJlQ29uZGl0aW9ucy5sZW5ndGggPiAwXHJcbiAgICAgICAgPyBgV0hFUkUgJHt3aGVyZUNvbmRpdGlvbnMuam9pbihcIiBBTkQgXCIpfWBcclxuICAgICAgICA6IFwiXCI7XHJcblxyXG4gICAgY29uc3Qgc3FsID0gYFxyXG4gICAgICBTRUxFQ1QgRElTVElOQ1QgXHJcbiAgICAgICAgcC4qLFxyXG4gICAgICAgIHMubmFtZSBhcyBhc3NpZ25lZF90ZWFtX21lbWJlcl9uYW1lLCBcclxuICAgICAgICBzLmNvZGUgYXMgYXNzaWduZWRfdGVhbV9tZW1iZXJfY29kZSxcclxuICAgICAgICBjLmNsaWVudF9uYW1lLFxyXG4gICAgICAgIGMuY29tcGFueV9hZGRyZXNzLFxyXG4gICAgICAgIGMucGhvbmVfbnVtYmVyLFxyXG4gICAgICAgIGMuY29udGFjdF9wZXJzb24sXHJcbiAgICAgICAgYy5lbWFpbCxcclxuICAgICAgICBwLmRyaXZlX2ZvbGRlcl9pZCxcclxuICAgICAgICBwLmRyaXZlX2ZvbGRlcl9saW5rXHJcbiAgICAgIEZST00gcHJvamVjdHMgcFxyXG4gICAgICBMRUZUIEpPSU4gc3RhZmZfbWVtYmVycyBzIE9OIHAuYXNzaWduZWRfdGVhbV9tZW1iZXIgPSBzLmNvZGVcclxuICAgICAgTEVGVCBKT0lOIGNsaWVudHMgYyBPTiBwLmNsaWVudF9pZCA9IGMuaWRcclxuICAgICAgJHt3aGVyZUNsYXVzZX1cclxuICAgICAgT1JERVIgQlkgcC5jcmVhdGVkX2F0IERFU0NcclxuICAgIGA7XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJGaW5hbCBxdWVyeTpcIiwgc3FsKTtcclxuICAgIGNvbnNvbGUubG9nKFwiUGFyYW1ldGVyczpcIiwgcGFyYW1ldGVycyk7XHJcblxyXG4gICAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCBxdWVyeShzcWwsIHBhcmFtZXRlcnMpO1xyXG4gICAgY29uc3QgcHJvamVjdHMgPSByb3dzO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFwiUXVlcnkgcmVzdWx0cyBjb3VudDpcIiwgcHJvamVjdHMubGVuZ3RoKTtcclxuXHJcbiAgICAvLyDph43opIfpmLLmraI6IGlk44Gn44Om44OL44O844Kv44Gr44GZ44KLXHJcbiAgICBjb25zdCB1bmlxdWVQcm9qZWN0cyA9IHByb2plY3RzLmZpbHRlcihcclxuICAgICAgKHByb2plY3QsIGluZGV4LCBzZWxmKSA9PlxyXG4gICAgICAgIGluZGV4ID09PSBzZWxmLmZpbmRJbmRleCgocCkgPT4gcC5pZCA9PT0gcHJvamVjdC5pZClcclxuICAgICk7XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJVbmlxdWUgcHJvamVjdHMgY291bnQ6XCIsIHVuaXF1ZVByb2plY3RzLmxlbmd0aCk7XHJcbiAgICBjb25zb2xlLmxvZyhcIj09PSBQcm9qZWN0cyBBUEkgRGVidWcgRW5kID09PVwiKTtcclxuXHJcbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbih1bmlxdWVQcm9qZWN0cyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBwcm9qZWN0czpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6IFwiRmFpbGVkIHRvIGZldGNoIHByb2plY3RzXCIgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGFkX251bWJlcixcclxuICAgICAgcHJvamVjdF9uYW1lLFxyXG4gICAgICBjbGllbnRfbmFtZSxcclxuICAgICAgaW5xdWlyeV9kYXRlLFxyXG4gICAgICByZW1hcmtzLFxyXG4gICAgICBwcm9kdWN0X251bWJlcixcclxuICAgICAgaW5zdGFsbGF0aW9uX2RhdGUsXHJcbiAgICAgIGluc3RhbGxhdGlvbl9jb250cmFjdG9yLFxyXG4gICAgICBkZWxpdmVyeV9kYXRlLFxyXG4gICAgICBhc3NpZ25lZF90ZWFtX21lbWJlcixcclxuICAgICAgY29tcGFueV9hZGRyZXNzLFxyXG4gICAgICBhZGRyZXNzLFxyXG4gICAgICBwaG9uZV9udW1iZXIsXHJcbiAgICAgIGVzdGltYXRlZF9hbW91bnQsXHJcbiAgICAgIGNvbnRhY3RfcGVyc29uLFxyXG4gICAgICBlbWFpbCxcclxuICAgIH0gPSBib2R5O1xyXG5cclxuICAgIC8vIOW/hemgiOODgeOCp+ODg+OCr1xyXG4gICAgaWYgKCFhZF9udW1iZXIgfHwgIXByb2plY3RfbmFtZSB8fCAhY2xpZW50X25hbWUgfHwgIWlucXVpcnlfZGF0ZSkge1xyXG4gICAgICByZXR1cm4gUmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiBcIkFE55Wq5Y+344CB44OX44Ot44K444Kn44Kv44OI5ZCN44CB5Y+W5byV5YWI5ZCN44CB5ZWP44GE5ZCI44KP44Gb5pel44Gv5b+F6aCI44Gn44GZXCIgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBROeVquWPt+OBr+aVsOWtl1xyXG4gICAgaWYgKGlzTmFOKHBhcnNlSW50KGFkX251bWJlcikpKSB7XHJcbiAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6IFwiQUTnlarlj7fjga/mlbDlrZfjgaflhaXlipvjgZfjgabjgY/jgaDjgZXjgYRcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOaLheW9k+iAheOCs+ODvOODieWkieaPm++8iElEIOKGkiBjb2RlIC8gY29kZSDihpIgY29kZe+8iVxyXG4gICAgbGV0IGFzc2lnbmVkQ29kZSA9IG51bGw7XHJcbiAgICBpZiAoYXNzaWduZWRfdGVhbV9tZW1iZXIpIHtcclxuICAgICAgaWYgKHR5cGVvZiBhc3NpZ25lZF90ZWFtX21lbWJlciA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgIC8vIGlkIOKGkiBjb2RlXHJcbiAgICAgICAgY29uc3Qgc3RhZmZCeUlkID0gYXdhaXQgcXVlcnkoXHJcbiAgICAgICAgICBgU0VMRUNUIGNvZGUgRlJPTSBzdGFmZl9tZW1iZXJzIFdIRVJFIGlkID0gJDFgLFxyXG4gICAgICAgICAgW2Fzc2lnbmVkX3RlYW1fbWVtYmVyXVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYgKHN0YWZmQnlJZC5yb3dzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGFzc2lnbmVkQ29kZSA9IHN0YWZmQnlJZC5yb3dzWzBdLmNvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgIHR5cGVvZiBhc3NpZ25lZF90ZWFtX21lbWJlciA9PT0gXCJzdHJpbmdcIiAmJlxyXG4gICAgICAgIGFzc2lnbmVkX3RlYW1fbWVtYmVyLm1hdGNoKC9eW0EtWl0kLylcclxuICAgICAgKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhZmZCeUNvZGUgPSBhd2FpdCBxdWVyeShcclxuICAgICAgICAgIGBTRUxFQ1QgY29kZSBGUk9NIHN0YWZmX21lbWJlcnMgV0hFUkUgY29kZSA9ICQxYCxcclxuICAgICAgICAgIFthc3NpZ25lZF90ZWFtX21lbWJlcl1cclxuICAgICAgICApO1xyXG4gICAgICAgIGlmIChzdGFmZkJ5Q29kZS5yb3dzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGFzc2lnbmVkQ29kZSA9IGFzc2lnbmVkX3RlYW1fbWVtYmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIOOBvuOBmuOCr+ODqeOCpOOCouODs+ODiOOCkuaOouOBmSBvciDkvZzjgotcclxuICAgIGNvbnN0IGV4aXN0aW5nQ2xpZW50UmVzID0gYXdhaXQgcXVlcnkoXHJcbiAgICAgIGBcclxuICAgICAgU0VMRUNUIGlkIEZST00gY2xpZW50cyBcclxuICAgICAgV0hFUkUgY2xpZW50X25hbWUgPSAkMVxyXG4gICAgICAgIEFORCBDT0FMRVNDRShjb21wYW55X2FkZHJlc3MsICcnKSA9IENPQUxFU0NFKCQyLCAnJylcclxuICAgICAgICBBTkQgQ09BTEVTQ0UocGhvbmVfbnVtYmVyLCAnJykgPSBDT0FMRVNDRSgkMywgJycpXHJcbiAgICAgICAgQU5EIENPQUxFU0NFKGNvbnRhY3RfcGVyc29uLCAnJykgPSBDT0FMRVNDRSgkNCwgJycpXHJcbiAgICAgICAgQU5EIENPQUxFU0NFKGVtYWlsLCAnJykgPSBDT0FMRVNDRSgkNSwgJycpXHJcbiAgICAgIGAsXHJcbiAgICAgIFtcclxuICAgICAgICBjbGllbnRfbmFtZSxcclxuICAgICAgICBjb21wYW55X2FkZHJlc3MgfHwgXCJcIixcclxuICAgICAgICBwaG9uZV9udW1iZXIgfHwgXCJcIixcclxuICAgICAgICBjb250YWN0X3BlcnNvbiB8fCBcIlwiLFxyXG4gICAgICAgIGVtYWlsIHx8IFwiXCIsXHJcbiAgICAgIF1cclxuICAgICk7XHJcblxyXG4gICAgbGV0IGNsaWVudElkO1xyXG5cclxuICAgIGlmIChleGlzdGluZ0NsaWVudFJlcy5yb3dzLmxlbmd0aCA+IDApIHtcclxuICAgICAgY2xpZW50SWQgPSBleGlzdGluZ0NsaWVudFJlcy5yb3dzWzBdLmlkO1xyXG5cclxuICAgICAgYXdhaXQgcXVlcnkoXHJcbiAgICAgICAgYFxyXG4gICAgICAgIFVQREFURSBjbGllbnRzIFxyXG4gICAgICAgIFNFVCBcclxuICAgICAgICAgIGNvbXBhbnlfYWRkcmVzcyA9ICQxLFxyXG4gICAgICAgICAgcGhvbmVfbnVtYmVyID0gJDIsXHJcbiAgICAgICAgICBjb250YWN0X3BlcnNvbiA9ICQzLFxyXG4gICAgICAgICAgZW1haWwgPSAkNCxcclxuICAgICAgICAgIHVwZGF0ZWRfYXQgPSBOT1coKVxyXG4gICAgICAgIFdIRVJFIGlkID0gJDVcclxuICAgICAgICBgLFxyXG4gICAgICAgIFtcclxuICAgICAgICAgIGNvbXBhbnlfYWRkcmVzcyB8fCBudWxsLFxyXG4gICAgICAgICAgcGhvbmVfbnVtYmVyIHx8IG51bGwsXHJcbiAgICAgICAgICBjb250YWN0X3BlcnNvbiB8fCBudWxsLFxyXG4gICAgICAgICAgZW1haWwgfHwgbnVsbCxcclxuICAgICAgICAgIGNsaWVudElkLFxyXG4gICAgICAgIF1cclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGluc2VydGVkQ2xpZW50ID0gYXdhaXQgcXVlcnkoXHJcbiAgICAgICAgYFxyXG4gICAgICAgIElOU0VSVCBJTlRPIGNsaWVudHMgKFxyXG4gICAgICAgICAgY2xpZW50X25hbWUsXHJcbiAgICAgICAgICBjb21wYW55X2FkZHJlc3MsXHJcbiAgICAgICAgICBwaG9uZV9udW1iZXIsXHJcbiAgICAgICAgICBjb250YWN0X3BlcnNvbixcclxuICAgICAgICAgIGVtYWlsXHJcbiAgICAgICAgKSBWQUxVRVMgKCQxLCAkMiwgJDMsICQ0LCAkNSlcclxuICAgICAgICBSRVRVUk5JTkcgaWRcclxuICAgICAgICBgLFxyXG4gICAgICAgIFtcclxuICAgICAgICAgIGNsaWVudF9uYW1lLFxyXG4gICAgICAgICAgY29tcGFueV9hZGRyZXNzIHx8IG51bGwsXHJcbiAgICAgICAgICBwaG9uZV9udW1iZXIgfHwgbnVsbCxcclxuICAgICAgICAgIGNvbnRhY3RfcGVyc29uIHx8IG51bGwsXHJcbiAgICAgICAgICBlbWFpbCB8fCBudWxsLFxyXG4gICAgICAgIF1cclxuICAgICAgKTtcclxuICAgICAgY2xpZW50SWQgPSBpbnNlcnRlZENsaWVudC5yb3dzWzBdLmlkO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOODl+ODreOCuOOCp+OCr+ODiOeZu+mMslxyXG4gICAgY29uc3QgaW5zZXJ0ZWRQcm9qZWN0ID0gYXdhaXQgcXVlcnkoXHJcbiAgICAgIGBcclxuICAgICAgSU5TRVJUIElOVE8gcHJvamVjdHMgKFxyXG4gICAgICAgIGFkX251bWJlcixcclxuICAgICAgICBwcm9qZWN0X25hbWUsXHJcbiAgICAgICAgY2xpZW50X2lkLFxyXG4gICAgICAgIGlucXVpcnlfZGF0ZSxcclxuICAgICAgICByZW1hcmtzLFxyXG4gICAgICAgIHByb2R1Y3RfbnVtYmVyLFxyXG4gICAgICAgIGluc3RhbGxhdGlvbl9kYXRlLFxyXG4gICAgICAgIGluc3RhbGxhdGlvbl9jb250cmFjdG9yLFxyXG4gICAgICAgIGRlbGl2ZXJ5X2RhdGUsXHJcbiAgICAgICAgYXNzaWduZWRfdGVhbV9tZW1iZXIsXHJcbiAgICAgICAgYWRkcmVzcyxcclxuICAgICAgICBlc3RpbWF0ZWRfYW1vdW50LFxyXG4gICAgICAgIHN0YXR1cyxcclxuICAgICAgICBjcmVhdGVkX2F0LFxyXG4gICAgICAgIHVwZGF0ZWRfYXRcclxuICAgICAgKSBWQUxVRVMgKFxyXG4gICAgICAgICQxLCAkMiwgJDMsICQ0LCAkNSxcclxuICAgICAgICAkNiwgJDcsICQ4LCAkOSwgJDEwLFxyXG4gICAgICAgICQxMSwgJDEyLCAkMTMsIE5PVygpLCBOT1coKVxyXG4gICAgICApXHJcbiAgICAgIFJFVFVSTklORyAqXHJcbiAgICAgIGAsXHJcbiAgICAgIFtcclxuICAgICAgICBwYXJzZUludChhZF9udW1iZXIpLFxyXG4gICAgICAgIHByb2plY3RfbmFtZSxcclxuICAgICAgICBjbGllbnRJZCxcclxuICAgICAgICBpbnF1aXJ5X2RhdGUsXHJcbiAgICAgICAgcmVtYXJrcyB8fCBudWxsLFxyXG4gICAgICAgIHByb2R1Y3RfbnVtYmVyIHx8IG51bGwsXHJcbiAgICAgICAgaW5zdGFsbGF0aW9uX2RhdGUgfHwgbnVsbCxcclxuICAgICAgICBpbnN0YWxsYXRpb25fY29udHJhY3RvciB8fCBudWxsLFxyXG4gICAgICAgIGRlbGl2ZXJ5X2RhdGUgfHwgbnVsbCxcclxuICAgICAgICBhc3NpZ25lZENvZGUsXHJcbiAgICAgICAgYWRkcmVzcyB8fCBudWxsLFxyXG4gICAgICAgIGVzdGltYXRlZF9hbW91bnQgPyBwYXJzZUZsb2F0KGVzdGltYXRlZF9hbW91bnQpIDogbnVsbCxcclxuICAgICAgICBcIuODquODvOODiVwiLFxyXG4gICAgICBdXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IHByb2plY3QgPSBpbnNlcnRlZFByb2plY3Qucm93c1swXTtcclxuXHJcbiAgICAvLyDmtLvli5Xjg63jgrBcclxuICAgIGF3YWl0IHF1ZXJ5KFxyXG4gICAgICBgXHJcbiAgICAgIElOU0VSVCBJTlRPIHByb2plY3RfYWN0aXZpdGllcyAocHJvamVjdF9pZCwgYWN0aXZpdHlfdHlwZSwgZGVzY3JpcHRpb24pXHJcbiAgICAgIFZBTFVFUyAoJDEsICQyLCAkMylcclxuICAgICAgYCxcclxuICAgICAgW1xyXG4gICAgICAgIHByb2plY3QuaWQsXHJcbiAgICAgICAgXCJwcm9qZWN0X2NyZWF0ZWRcIixcclxuICAgICAgICBg44OX44Ot44K444Kn44Kv44OI44CMJHtwcm9qZWN0X25hbWV944CN44GM5L2c5oiQ44GV44KM44G+44GX44GfYCxcclxuICAgICAgXVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBHb29nbGUgRHJpdmUg44OV44Kp44Or44OA5L2c5oiQXHJcbiAgICBsZXQgZHJpdmVGb2xkZXJJZCA9IG51bGw7XHJcbiAgICBsZXQgZHJpdmVGb2xkZXJMaW5rID0gbnVsbDtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBmb2xkZXJOYW1lID0gYEFELSR7cHJvamVjdC5hZF9udW1iZXJ9YDtcclxuICAgICAgY29uc3QgZHJpdmVSZXN1bHQgPSBhd2FpdCBjcmVhdGVHb29nbGVEcml2ZUZvbGRlcihmb2xkZXJOYW1lKTtcclxuXHJcbiAgICAgIGlmIChcclxuICAgICAgICBkcml2ZVJlc3VsdC5zdWNjZXNzICYmXHJcbiAgICAgICAgZHJpdmVSZXN1bHQuZm9sZGVySWQgJiZcclxuICAgICAgICBkcml2ZVJlc3VsdC53ZWJWaWV3TGlua1xyXG4gICAgICApIHtcclxuICAgICAgICBkcml2ZUZvbGRlcklkID0gZHJpdmVSZXN1bHQuZm9sZGVySWQ7XHJcbiAgICAgICAgZHJpdmVGb2xkZXJMaW5rID0gZHJpdmVSZXN1bHQud2ViVmlld0xpbms7XHJcblxyXG4gICAgICAgIGF3YWl0IHF1ZXJ5KFxyXG4gICAgICAgICAgYFxyXG4gICAgICAgICAgVVBEQVRFIHByb2plY3RzIFxyXG4gICAgICAgICAgU0VUIFxyXG4gICAgICAgICAgICBkcml2ZV9mb2xkZXJfaWQgPSAkMSxcclxuICAgICAgICAgICAgZHJpdmVfZm9sZGVyX2xpbmsgPSAkMlxyXG4gICAgICAgICAgV0hFUkUgaWQgPSAkM1xyXG4gICAgICAgICAgYCxcclxuICAgICAgICAgIFtkcml2ZUZvbGRlcklkLCBkcml2ZUZvbGRlckxpbmssIHByb2plY3QuaWRdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICBcIkdvb2dsZSBEcml2ZSBmb2xkZXIgY3JlYXRlZCBhbmQgc2F2ZWQgdG8gZGF0YWJhc2U6XCIsXHJcbiAgICAgICAgICBkcml2ZVJlc3VsdFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICAgIFwiR29vZ2xlIERyaXZlIGZvbGRlciBjcmVhdGlvbiBmYWlsZWQ6XCIsXHJcbiAgICAgICAgICBkcml2ZVJlc3VsdC5lcnJvclxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGRyaXZlRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkdvb2dsZSBEcml2ZSBpbnRlZ3JhdGlvbiBlcnJvcjpcIiwgZHJpdmVFcnJvcik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFJlc3BvbnNlLmpzb24ocHJvamVjdCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZyBwcm9qZWN0OlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogXCLjg5fjg63jgrjjgqfjgq/jg4jjga7kvZzmiJDjgavlpLHmlZfjgZfjgb7jgZfjgZ9cIiB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gREVMRVRFKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBxdWVyeShgREVMRVRFIEZST00gcHJvamVjdHNgKTtcclxuICAgIHJldHVybiBSZXNwb25zZS5qc29uKHtcclxuICAgICAgbWVzc2FnZTogXCLlhajjgabjga7jg5fjg63jgrjjgqfjgq/jg4jjgYzliYrpmaTjgZXjgozjgb7jgZfjgZ9cIixcclxuICAgICAgZGVsZXRlZENvdW50OiByZXMucm93Q291bnQgPz8gbnVsbCxcclxuICAgIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZGVsZXRpbmcgYWxsIHByb2plY3RzOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogXCLlhajjgabjga7jg5fjg63jgrjjgqfjgq/jg4jjga7liYrpmaTjgavlpLHmlZfjgZfjgb7jgZfjgZ9cIiB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJxdWVyeSIsImNyZWF0ZUdvb2dsZURyaXZlRm9sZGVyIiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsInN0YXR1cyIsImdldCIsInNlYXJjaCIsImFzc2lnbmVkX3RlYW1fbWVtYmVyIiwiZ2ZpIiwiY29uc29sZSIsImxvZyIsIndoZXJlQ29uZGl0aW9ucyIsInBhcmFtZXRlcnMiLCJwdXNoIiwibGVuZ3RoIiwic2VhcmNoUGF0dGVybiIsIndoZXJlQ2xhdXNlIiwiam9pbiIsInNxbCIsInJvd3MiLCJwcm9qZWN0cyIsInVuaXF1ZVByb2plY3RzIiwiZmlsdGVyIiwicHJvamVjdCIsImluZGV4Iiwic2VsZiIsImZpbmRJbmRleCIsInAiLCJpZCIsIlJlc3BvbnNlIiwianNvbiIsImVycm9yIiwiUE9TVCIsImJvZHkiLCJhZF9udW1iZXIiLCJwcm9qZWN0X25hbWUiLCJjbGllbnRfbmFtZSIsImlucXVpcnlfZGF0ZSIsInJlbWFya3MiLCJwcm9kdWN0X251bWJlciIsImluc3RhbGxhdGlvbl9kYXRlIiwiaW5zdGFsbGF0aW9uX2NvbnRyYWN0b3IiLCJkZWxpdmVyeV9kYXRlIiwiY29tcGFueV9hZGRyZXNzIiwiYWRkcmVzcyIsInBob25lX251bWJlciIsImVzdGltYXRlZF9hbW91bnQiLCJjb250YWN0X3BlcnNvbiIsImVtYWlsIiwiaXNOYU4iLCJwYXJzZUludCIsImFzc2lnbmVkQ29kZSIsInN0YWZmQnlJZCIsImNvZGUiLCJtYXRjaCIsInN0YWZmQnlDb2RlIiwiZXhpc3RpbmdDbGllbnRSZXMiLCJjbGllbnRJZCIsImluc2VydGVkQ2xpZW50IiwiaW5zZXJ0ZWRQcm9qZWN0IiwicGFyc2VGbG9hdCIsImRyaXZlRm9sZGVySWQiLCJkcml2ZUZvbGRlckxpbmsiLCJmb2xkZXJOYW1lIiwiZHJpdmVSZXN1bHQiLCJzdWNjZXNzIiwiZm9sZGVySWQiLCJ3ZWJWaWV3TGluayIsImRyaXZlRXJyb3IiLCJERUxFVEUiLCJyZXMiLCJtZXNzYWdlIiwiZGVsZXRlZENvdW50Iiwicm93Q291bnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/projects/route.js\n");

/***/ }),

/***/ "(rsc)/./src/app/api/utils/googleDrive.js":
/*!******************************************!*\
  !*** ./src/app/api/utils/googleDrive.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkParentFolderAccess: () => (/* binding */ checkParentFolderAccess),\n/* harmony export */   createGoogleDriveFolder: () => (/* binding */ createGoogleDriveFolder)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\n// Google Drive API utilities\n// Check if parent folder exists and is accessible\nasync function checkParentFolderAccess() {\n    try {\n        const serviceAccountKey = process.env.GOOGLE_SERVICE_ACCOUNT_KEY;\n        const parentFolderId = process.env.GOOGLE_DRIVE_PARENT_FOLDER_ID;\n        if (!serviceAccountKey || !parentFolderId) {\n            return {\n                success: false,\n                error: \"Missing credentials or parent folder ID\",\n                isWarning: true\n            };\n        }\n        const credentials = JSON.parse(serviceAccountKey);\n        const accessToken = await getAccessToken(credentials);\n        // Try to get parent folder info with shared drive support\n        const response = await fetch(`https://www.googleapis.com/drive/v3/files/${parentFolderId}?fields=id,name,parents,permissions,owners,webViewLink,capabilities,driveId&supportsAllDrives=true`, {\n            method: \"GET\",\n            headers: {\n                Authorization: `Bearer ${accessToken}`\n            }\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            return {\n                success: false,\n                error: `Parent folder check failed: ${response.status} - ${errorText}`,\n                parentFolderId,\n                serviceAccount: credentials.client_email,\n                isSharedDrive: \"unknown\",\n                isWarning: true,\n                suggestion: \"親フォルダの直接アクセスはできませんが、フォルダ作成は可能です。サービスアカウントの権限を確認してください。\"\n            };\n        }\n        const folderInfo = await response.json();\n        // Check if this is in a shared drive\n        const isInSharedDrive = !!folderInfo.driveId;\n        // If folder has parents, get parent folder info too\n        let parentFolderInfo = null;\n        if (folderInfo.parents && folderInfo.parents.length > 0) {\n            try {\n                const parentResponse = await fetch(`https://www.googleapis.com/drive/v3/files/${folderInfo.parents[0]}?fields=id,name,parents,webViewLink,driveId&supportsAllDrives=true`, {\n                    method: \"GET\",\n                    headers: {\n                        Authorization: `Bearer ${accessToken}`\n                    }\n                });\n                if (parentResponse.ok) {\n                    parentFolderInfo = await parentResponse.json();\n                }\n            } catch (e) {\n            // Parent folder info is optional\n            }\n        }\n        // Get shared drive info if applicable\n        let sharedDriveInfo = null;\n        if (isInSharedDrive) {\n            try {\n                const driveResponse = await fetch(`https://www.googleapis.com/drive/v3/drives/${folderInfo.driveId}?fields=id,name,capabilities`, {\n                    method: \"GET\",\n                    headers: {\n                        Authorization: `Bearer ${accessToken}`\n                    }\n                });\n                if (driveResponse.ok) {\n                    sharedDriveInfo = await driveResponse.json();\n                }\n            } catch (e) {\n            // Shared drive info is optional\n            }\n        }\n        return {\n            success: true,\n            folderInfo,\n            parentFolderInfo,\n            sharedDriveInfo,\n            serviceAccount: credentials.client_email,\n            message: \"Parent folder is accessible\",\n            isSharedDrive: isInSharedDrive,\n            hierarchy: {\n                isInSubfolder: !!folderInfo.parents,\n                parentFolderId: folderInfo.parents?.[0],\n                parentFolderName: parentFolderInfo?.name,\n                sharedDriveName: sharedDriveInfo?.name,\n                suggestion: isInSharedDrive ? \"共有ドライブ内のフォルダです。サービスアカウントが適切な権限を持っているか確認してください。\" : folderInfo.parents ? \"フォルダがサブフォルダ内にあります。ルートレベルでの作成を推奨します。\" : \"フォルダはルートレベルにあります。\"\n            }\n        };\n    } catch (error) {\n        return {\n            success: false,\n            error: error.message,\n            isWarning: true\n        };\n    }\n}\nasync function createGoogleDriveFolder(folderName) {\n    let folderCreated = false;\n    let createdFolderId = null;\n    let createdFolderName = null;\n    let webViewLink = null;\n    try {\n        console.log(\"Creating Google Drive folder for:\", folderName);\n        const serviceAccountKey = process.env.GOOGLE_SERVICE_ACCOUNT_KEY;\n        const parentFolderId = process.env.GOOGLE_DRIVE_PARENT_FOLDER_ID;\n        console.log(\"Environment check - Service Account Key exists:\", !!serviceAccountKey);\n        console.log(\"Environment check - Parent Folder ID exists:\", !!parentFolderId);\n        if (!serviceAccountKey || !parentFolderId) {\n            console.log(\"Google Drive not configured, using fallback\");\n            return {\n                success: true,\n                folderId: null,\n                folderName: folderName,\n                webViewLink: parentFolderId ? `https://drive.google.com/drive/folders/${parentFolderId}` : null,\n                message: \"Google Drive credentials not configured - please set up service account\"\n            };\n        }\n        // Parse service account key\n        let credentials;\n        try {\n            credentials = JSON.parse(serviceAccountKey);\n            console.log(\"Service account key parsed successfully\");\n        } catch (parseError) {\n            console.error(\"Failed to parse service account key:\", parseError);\n            return {\n                success: false,\n                error: `Invalid service account key format: ${parseError.message}`,\n                message: \"サービスアカウントキーの形式が無効です\"\n            };\n        }\n        // Get access token using service account\n        console.log(\"Getting access token...\");\n        let accessToken;\n        try {\n            accessToken = await getAccessToken(credentials);\n            console.log(\"Access token obtained successfully\");\n        } catch (tokenError) {\n            console.error(\"Failed to get access token:\", tokenError);\n            return {\n                success: false,\n                error: `Failed to get access token: ${tokenError.message}`,\n                message: \"アクセストークンの取得に失敗しました\"\n            };\n        }\n        // Create folder metadata\n        const folderMetadata = {\n            name: folderName,\n            parents: [\n                parentFolderId\n            ],\n            mimeType: \"application/vnd.google-apps.folder\"\n        };\n        console.log(\"Creating folder with metadata:\", folderMetadata);\n        // Create folder in Google Drive\n        const response = await fetch(\"https://www.googleapis.com/drive/v3/files?supportsAllDrives=true\", {\n            method: \"POST\",\n            headers: {\n                Authorization: `Bearer ${accessToken}`,\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(folderMetadata)\n        });\n        console.log(\"Google Drive API response status:\", response.status);\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(\"Google Drive API error response:\", errorText);\n            // Check if it's a duplicate folder error (folder already exists)\n            if (response.status === 409 || errorText.includes(\"already exists\")) {\n                console.log(\"Folder may already exist, checking existing folders...\");\n                try {\n                    // Search for existing folder with same name\n                    const searchResponse = await fetch(`https://www.googleapis.com/drive/v3/files?q=name='${encodeURIComponent(folderName)}' and '${parentFolderId}' in parents and mimeType='application/vnd.google-apps.folder'&supportsAllDrives=true`, {\n                        method: \"GET\",\n                        headers: {\n                            Authorization: `Bearer ${accessToken}`\n                        }\n                    });\n                    if (searchResponse.ok) {\n                        const searchResult = await searchResponse.json();\n                        if (searchResult.files && searchResult.files.length > 0) {\n                            const existingFolder = searchResult.files[0];\n                            console.log(\"Found existing folder:\", existingFolder);\n                            return {\n                                success: true,\n                                folderId: existingFolder.id,\n                                folderName: existingFolder.name,\n                                webViewLink: `https://drive.google.com/drive/folders/${existingFolder.id}`,\n                                message: \"同名のフォルダが既に存在していました（使用可能）\",\n                                isExisting: true\n                            };\n                        }\n                    }\n                } catch (searchError) {\n                    console.error(\"Error searching for existing folder:\", searchError);\n                }\n            }\n            return {\n                success: false,\n                error: `Google Drive API error: ${response.status} - ${errorText}`,\n                webViewLink: parentFolderId ? `https://drive.google.com/drive/folders/${parentFolderId}` : null,\n                message: `フォルダ作成APIエラー（${response.status}）`\n            };\n        }\n        // At this point, the API call was successful - mark folder as created\n        folderCreated = true;\n        console.log(\"✅ Google Drive API call successful, parsing response...\");\n        let result;\n        try {\n            result = await response.json();\n            console.log(\"✅ Response parsed successfully:\", result);\n            // Extract created folder details\n            createdFolderId = result.id;\n            createdFolderName = result.name;\n            webViewLink = `https://drive.google.com/drive/folders/${result.id}`;\n            console.log(\"✅ Folder details extracted:\", {\n                id: createdFolderId,\n                name: createdFolderName,\n                webViewLink\n            });\n        } catch (parseError) {\n            console.error(\"⚠️ Error parsing response JSON:\", parseError);\n            // Even if parsing fails, the folder was created (API returned 200/201)\n            return {\n                success: true,\n                folderId: null,\n                folderName: folderName,\n                webViewLink: parentFolderId ? `https://drive.google.com/drive/folders/${parentFolderId}` : null,\n                message: \"フォルダは作成されましたが、詳細情報の取得でエラーが発生しました\",\n                warning: `Response parse error: ${parseError.message}`\n            };\n        }\n        console.log(\"✅ Google Drive folder creation completed successfully\");\n        return {\n            success: true,\n            folderId: result.id,\n            folderName: result.name,\n            webViewLink: webViewLink,\n            message: \"Google Driveフォルダが正常に作成されました\"\n        };\n    } catch (error) {\n        console.error(\"Error creating Google Drive folder:\", {\n            message: error.message,\n            folderName,\n            folderCreated,\n            createdFolderId\n        });\n        // If folder was created but there was a subsequent error, still return success\n        if (folderCreated && createdFolderId) {\n            console.log(\"Folder was created despite error, returning success\");\n            return {\n                success: true,\n                folderId: createdFolderId,\n                folderName: createdFolderName,\n                webViewLink: webViewLink,\n                message: \"フォルダは作成されました（一部警告あり）\",\n                warning: error.message\n            };\n        }\n        return {\n            success: false,\n            error: error.message,\n            webViewLink: process.env.GOOGLE_DRIVE_PARENT_FOLDER_ID ? `https://drive.google.com/drive/folders/${process.env.GOOGLE_DRIVE_PARENT_FOLDER_ID}` : null,\n            message: \"フォルダ自動作成に失敗しました。手動で作成してください。\"\n        };\n    }\n}\nasync function getAccessToken(credentials) {\n    try {\n        console.log(\"Creating JWT token...\");\n        const now = Math.floor(Date.now() / 1000);\n        const exp = now + 3600; // 1 hour expiration\n        // Create JWT payload\n        const payload = {\n            iss: credentials.client_email,\n            scope: \"https://www.googleapis.com/auth/drive.file\",\n            aud: \"https://oauth2.googleapis.com/token\",\n            iat: now,\n            exp: exp\n        };\n        // Create JWT token\n        const token = createJWT(payload, credentials.private_key);\n        console.log(\"JWT token created successfully\");\n        // Exchange JWT for access token\n        console.log(\"Exchanging JWT for access token...\");\n        const tokenResponse = await fetch(\"https://oauth2.googleapis.com/token\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/x-www-form-urlencoded\"\n            },\n            body: new URLSearchParams({\n                grant_type: \"urn:ietf:params:oauth:grant-type:jwt-bearer\",\n                assertion: token\n            })\n        });\n        console.log(\"Token exchange response status:\", tokenResponse.status);\n        if (!tokenResponse.ok) {\n            const errorText = await tokenResponse.text();\n            console.error(\"Token exchange error response:\", errorText);\n            throw new Error(`Token exchange failed: ${tokenResponse.status} - ${errorText}`);\n        }\n        const tokenData = await tokenResponse.json();\n        console.log(\"Access token obtained successfully\");\n        return tokenData.access_token;\n    } catch (error) {\n        console.error(\"Error in getAccessToken:\", error);\n        throw error;\n    }\n}\nfunction createJWT(payload, privateKey) {\n    // JWT Header\n    const header = {\n        alg: \"RS256\",\n        typ: \"JWT\"\n    };\n    // Base64URL encode header and payload\n    const encodedHeader = base64UrlEncode(JSON.stringify(header));\n    const encodedPayload = base64UrlEncode(JSON.stringify(payload));\n    // Create signature input\n    const signatureInput = `${encodedHeader}.${encodedPayload}`;\n    // Sign using Node.js crypto\n    const sign = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.createSign)(\"RSA-SHA256\");\n    sign.update(signatureInput);\n    sign.end();\n    const signature = sign.sign(privateKey);\n    const encodedSignature = base64UrlEncode(signature);\n    return `${signatureInput}.${encodedSignature}`;\n}\nfunction base64UrlEncode(str) {\n    // Convert string or buffer to base64url\n    let buffer;\n    if (typeof str === \"string\") {\n        buffer = Buffer.from(str, \"utf8\");\n    } else {\n        buffer = Buffer.from(str);\n    }\n    return buffer.toString(\"base64\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q1osT0FBT3FDLFVBQVVDLFlBQVk7SUFDL0IsRUFBRSxPQUFPbEYsT0FBTztRQUNkMkMsUUFBUTNDLEtBQUssQ0FBQyw0QkFBNEJBO1FBQzFDLE1BQU1BO0lBQ1I7QUFDRjtBQUVBLFNBQVMwRSxVQUFVTixPQUFPLEVBQUVlLFVBQVU7SUFDcEMsYUFBYTtJQUNiLE1BQU1DLFNBQVM7UUFDYkMsS0FBSztRQUNMQyxLQUFLO0lBQ1A7SUFFQSxzQ0FBc0M7SUFDdEMsTUFBTUMsZ0JBQWdCQyxnQkFBZ0JyRixLQUFLZ0QsU0FBUyxDQUFDaUM7SUFDckQsTUFBTUssaUJBQWlCRCxnQkFBZ0JyRixLQUFLZ0QsU0FBUyxDQUFDaUI7SUFFdEQseUJBQXlCO0lBQ3pCLE1BQU1zQixpQkFBaUIsQ0FBQyxFQUFFSCxjQUFjLENBQUMsRUFBRUUsZUFBZSxDQUFDO0lBRTNELDRCQUE0QjtJQUM1QixNQUFNRSxPQUFPcEcsa0RBQVVBLENBQUM7SUFDeEJvRyxLQUFLQyxNQUFNLENBQUNGO0lBQ1pDLEtBQUtFLEdBQUc7SUFFUixNQUFNQyxZQUFZSCxLQUFLQSxJQUFJLENBQUNSO0lBQzVCLE1BQU1ZLG1CQUFtQlAsZ0JBQWdCTTtJQUV6QyxPQUFPLENBQUMsRUFBRUosZUFBZSxDQUFDLEVBQUVLLGlCQUFpQixDQUFDO0FBQ2hEO0FBRUEsU0FBU1AsZ0JBQWdCUSxHQUFHO0lBQzFCLHdDQUF3QztJQUN4QyxJQUFJQztJQUNKLElBQUksT0FBT0QsUUFBUSxVQUFVO1FBQzNCQyxTQUFTQyxPQUFPQyxJQUFJLENBQUNILEtBQUs7SUFDNUIsT0FBTztRQUNMQyxTQUFTQyxPQUFPQyxJQUFJLENBQUNIO0lBQ3ZCO0lBRUEsT0FBT0MsT0FDSkcsUUFBUSxDQUFDLFVBQ1RDLE9BQU8sQ0FBQyxPQUFPLEtBQ2ZBLE9BQU8sQ0FBQyxPQUFPLEtBQ2ZBLE9BQU8sQ0FBQyxNQUFNO0FBQ25CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW4ta2FuLXdlYi8uL3NyYy9hcHAvYXBpL3V0aWxzL2dvb2dsZURyaXZlLmpzP2ZkZDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlU2lnbiB9IGZyb20gXCJjcnlwdG9cIjtcclxuXHJcbi8vIEdvb2dsZSBEcml2ZSBBUEkgdXRpbGl0aWVzXHJcblxyXG4vLyBDaGVjayBpZiBwYXJlbnQgZm9sZGVyIGV4aXN0cyBhbmQgaXMgYWNjZXNzaWJsZVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tQYXJlbnRGb2xkZXJBY2Nlc3MoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNlcnZpY2VBY2NvdW50S2V5ID0gcHJvY2Vzcy5lbnYuR09PR0xFX1NFUlZJQ0VfQUNDT1VOVF9LRVk7XHJcbiAgICBjb25zdCBwYXJlbnRGb2xkZXJJZCA9IHByb2Nlc3MuZW52LkdPT0dMRV9EUklWRV9QQVJFTlRfRk9MREVSX0lEO1xyXG5cclxuICAgIGlmICghc2VydmljZUFjY291bnRLZXkgfHwgIXBhcmVudEZvbGRlcklkKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IFwiTWlzc2luZyBjcmVkZW50aWFscyBvciBwYXJlbnQgZm9sZGVyIElEXCIsXHJcbiAgICAgICAgaXNXYXJuaW5nOiB0cnVlLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gSlNPTi5wYXJzZShzZXJ2aWNlQWNjb3VudEtleSk7XHJcbiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IGdldEFjY2Vzc1Rva2VuKGNyZWRlbnRpYWxzKTtcclxuXHJcbiAgICAvLyBUcnkgdG8gZ2V0IHBhcmVudCBmb2xkZXIgaW5mbyB3aXRoIHNoYXJlZCBkcml2ZSBzdXBwb3J0XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxyXG4gICAgICBgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjMvZmlsZXMvJHtwYXJlbnRGb2xkZXJJZH0/ZmllbGRzPWlkLG5hbWUscGFyZW50cyxwZXJtaXNzaW9ucyxvd25lcnMsd2ViVmlld0xpbmssY2FwYWJpbGl0aWVzLGRyaXZlSWQmc3VwcG9ydHNBbGxEcml2ZXM9dHJ1ZWAsXHJcbiAgICAgIHtcclxuICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICk7XHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IGBQYXJlbnQgZm9sZGVyIGNoZWNrIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9IC0gJHtlcnJvclRleHR9YCxcclxuICAgICAgICBwYXJlbnRGb2xkZXJJZCxcclxuICAgICAgICBzZXJ2aWNlQWNjb3VudDogY3JlZGVudGlhbHMuY2xpZW50X2VtYWlsLFxyXG4gICAgICAgIGlzU2hhcmVkRHJpdmU6IFwidW5rbm93blwiLFxyXG4gICAgICAgIGlzV2FybmluZzogdHJ1ZSwgLy8gTWFyayBhcyB3YXJuaW5nIGluc3RlYWQgb2YgZXJyb3JcclxuICAgICAgICBzdWdnZXN0aW9uOlxyXG4gICAgICAgICAgXCLopqrjg5Xjgqnjg6vjg4Djga7nm7TmjqXjgqLjgq/jgrvjgrnjga/jgafjgY3jgb7jgZvjgpPjgYzjgIHjg5Xjgqnjg6vjg4DkvZzmiJDjga/lj6/og73jgafjgZnjgILjgrXjg7zjg5PjgrnjgqLjgqvjgqbjg7Pjg4jjga7mqKnpmZDjgpLnorroqo3jgZfjgabjgY/jgaDjgZXjgYTjgIJcIixcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmb2xkZXJJbmZvID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgaW4gYSBzaGFyZWQgZHJpdmVcclxuICAgIGNvbnN0IGlzSW5TaGFyZWREcml2ZSA9ICEhZm9sZGVySW5mby5kcml2ZUlkO1xyXG5cclxuICAgIC8vIElmIGZvbGRlciBoYXMgcGFyZW50cywgZ2V0IHBhcmVudCBmb2xkZXIgaW5mbyB0b29cclxuICAgIGxldCBwYXJlbnRGb2xkZXJJbmZvID0gbnVsbDtcclxuICAgIGlmIChmb2xkZXJJbmZvLnBhcmVudHMgJiYgZm9sZGVySW5mby5wYXJlbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXJlbnRSZXNwb25zZSA9IGF3YWl0IGZldGNoKFxyXG4gICAgICAgICAgYGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2RyaXZlL3YzL2ZpbGVzLyR7Zm9sZGVySW5mby5wYXJlbnRzWzBdfT9maWVsZHM9aWQsbmFtZSxwYXJlbnRzLHdlYlZpZXdMaW5rLGRyaXZlSWQmc3VwcG9ydHNBbGxEcml2ZXM9dHJ1ZWAsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmIChwYXJlbnRSZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgcGFyZW50Rm9sZGVySW5mbyA9IGF3YWl0IHBhcmVudFJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBQYXJlbnQgZm9sZGVyIGluZm8gaXMgb3B0aW9uYWxcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCBzaGFyZWQgZHJpdmUgaW5mbyBpZiBhcHBsaWNhYmxlXHJcbiAgICBsZXQgc2hhcmVkRHJpdmVJbmZvID0gbnVsbDtcclxuICAgIGlmIChpc0luU2hhcmVkRHJpdmUpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkcml2ZVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgICAgICBgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjMvZHJpdmVzLyR7Zm9sZGVySW5mby5kcml2ZUlkfT9maWVsZHM9aWQsbmFtZSxjYXBhYmlsaXRpZXNgLFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgKTtcclxuICAgICAgICBpZiAoZHJpdmVSZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgc2hhcmVkRHJpdmVJbmZvID0gYXdhaXQgZHJpdmVSZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gU2hhcmVkIGRyaXZlIGluZm8gaXMgb3B0aW9uYWxcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGZvbGRlckluZm8sXHJcbiAgICAgIHBhcmVudEZvbGRlckluZm8sXHJcbiAgICAgIHNoYXJlZERyaXZlSW5mbyxcclxuICAgICAgc2VydmljZUFjY291bnQ6IGNyZWRlbnRpYWxzLmNsaWVudF9lbWFpbCxcclxuICAgICAgbWVzc2FnZTogXCJQYXJlbnQgZm9sZGVyIGlzIGFjY2Vzc2libGVcIixcclxuICAgICAgaXNTaGFyZWREcml2ZTogaXNJblNoYXJlZERyaXZlLFxyXG4gICAgICBoaWVyYXJjaHk6IHtcclxuICAgICAgICBpc0luU3ViZm9sZGVyOiAhIWZvbGRlckluZm8ucGFyZW50cyxcclxuICAgICAgICBwYXJlbnRGb2xkZXJJZDogZm9sZGVySW5mby5wYXJlbnRzPy5bMF0sXHJcbiAgICAgICAgcGFyZW50Rm9sZGVyTmFtZTogcGFyZW50Rm9sZGVySW5mbz8ubmFtZSxcclxuICAgICAgICBzaGFyZWREcml2ZU5hbWU6IHNoYXJlZERyaXZlSW5mbz8ubmFtZSxcclxuICAgICAgICBzdWdnZXN0aW9uOiBpc0luU2hhcmVkRHJpdmVcclxuICAgICAgICAgID8gXCLlhbHmnInjg4njg6njgqTjg5blhoXjga7jg5Xjgqnjg6vjg4DjgafjgZnjgILjgrXjg7zjg5PjgrnjgqLjgqvjgqbjg7Pjg4jjgYzpganliIfjgarmqKnpmZDjgpLmjIHjgaPjgabjgYTjgovjgYvnorroqo3jgZfjgabjgY/jgaDjgZXjgYTjgIJcIlxyXG4gICAgICAgICAgOiBmb2xkZXJJbmZvLnBhcmVudHNcclxuICAgICAgICAgICAgPyBcIuODleOCqeODq+ODgOOBjOOCteODluODleOCqeODq+ODgOWGheOBq+OBguOCiuOBvuOBmeOAguODq+ODvOODiOODrOODmeODq+OBp+OBruS9nOaIkOOCkuaOqOWlqOOBl+OBvuOBmeOAglwiXHJcbiAgICAgICAgICAgIDogXCLjg5Xjgqnjg6vjg4Djga/jg6vjg7zjg4jjg6zjg5njg6vjgavjgYLjgorjgb7jgZnjgIJcIixcclxuICAgICAgfSxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcclxuICAgICAgaXNXYXJuaW5nOiB0cnVlLCAvLyBNYXJrIGFzIHdhcm5pbmcgaW5zdGVhZCBvZiBlcnJvclxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVHb29nbGVEcml2ZUZvbGRlcihmb2xkZXJOYW1lKSB7XHJcbiAgbGV0IGZvbGRlckNyZWF0ZWQgPSBmYWxzZTtcclxuICBsZXQgY3JlYXRlZEZvbGRlcklkID0gbnVsbDtcclxuICBsZXQgY3JlYXRlZEZvbGRlck5hbWUgPSBudWxsO1xyXG4gIGxldCB3ZWJWaWV3TGluayA9IG51bGw7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIkNyZWF0aW5nIEdvb2dsZSBEcml2ZSBmb2xkZXIgZm9yOlwiLCBmb2xkZXJOYW1lKTtcclxuXHJcbiAgICBjb25zdCBzZXJ2aWNlQWNjb3VudEtleSA9IHByb2Nlc3MuZW52LkdPT0dMRV9TRVJWSUNFX0FDQ09VTlRfS0VZO1xyXG4gICAgY29uc3QgcGFyZW50Rm9sZGVySWQgPSBwcm9jZXNzLmVudi5HT09HTEVfRFJJVkVfUEFSRU5UX0ZPTERFUl9JRDtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcclxuICAgICAgXCJFbnZpcm9ubWVudCBjaGVjayAtIFNlcnZpY2UgQWNjb3VudCBLZXkgZXhpc3RzOlwiLFxyXG4gICAgICAhIXNlcnZpY2VBY2NvdW50S2V5LFxyXG4gICAgKTtcclxuICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICBcIkVudmlyb25tZW50IGNoZWNrIC0gUGFyZW50IEZvbGRlciBJRCBleGlzdHM6XCIsXHJcbiAgICAgICEhcGFyZW50Rm9sZGVySWQsXHJcbiAgICApO1xyXG5cclxuICAgIGlmICghc2VydmljZUFjY291bnRLZXkgfHwgIXBhcmVudEZvbGRlcklkKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiR29vZ2xlIERyaXZlIG5vdCBjb25maWd1cmVkLCB1c2luZyBmYWxsYmFja1wiKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIGZvbGRlcklkOiBudWxsLFxyXG4gICAgICAgIGZvbGRlck5hbWU6IGZvbGRlck5hbWUsXHJcbiAgICAgICAgd2ViVmlld0xpbms6IHBhcmVudEZvbGRlcklkXHJcbiAgICAgICAgICA/IGBodHRwczovL2RyaXZlLmdvb2dsZS5jb20vZHJpdmUvZm9sZGVycy8ke3BhcmVudEZvbGRlcklkfWBcclxuICAgICAgICAgIDogbnVsbCxcclxuICAgICAgICBtZXNzYWdlOlxyXG4gICAgICAgICAgXCJHb29nbGUgRHJpdmUgY3JlZGVudGlhbHMgbm90IGNvbmZpZ3VyZWQgLSBwbGVhc2Ugc2V0IHVwIHNlcnZpY2UgYWNjb3VudFwiLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFBhcnNlIHNlcnZpY2UgYWNjb3VudCBrZXlcclxuICAgIGxldCBjcmVkZW50aWFscztcclxuICAgIHRyeSB7XHJcbiAgICAgIGNyZWRlbnRpYWxzID0gSlNPTi5wYXJzZShzZXJ2aWNlQWNjb3VudEtleSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiU2VydmljZSBhY2NvdW50IGtleSBwYXJzZWQgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIHNlcnZpY2UgYWNjb3VudCBrZXk6XCIsIHBhcnNlRXJyb3IpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBgSW52YWxpZCBzZXJ2aWNlIGFjY291bnQga2V5IGZvcm1hdDogJHtwYXJzZUVycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICBtZXNzYWdlOiBcIuOCteODvOODk+OCueOCouOCq+OCpuODs+ODiOOCreODvOOBruW9ouW8j+OBjOeEoeWKueOBp+OBmVwiLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCBhY2Nlc3MgdG9rZW4gdXNpbmcgc2VydmljZSBhY2NvdW50XHJcbiAgICBjb25zb2xlLmxvZyhcIkdldHRpbmcgYWNjZXNzIHRva2VuLi4uXCIpO1xyXG4gICAgbGV0IGFjY2Vzc1Rva2VuO1xyXG4gICAgdHJ5IHtcclxuICAgICAgYWNjZXNzVG9rZW4gPSBhd2FpdCBnZXRBY2Nlc3NUb2tlbihjcmVkZW50aWFscyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiQWNjZXNzIHRva2VuIG9idGFpbmVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuICAgIH0gY2F0Y2ggKHRva2VuRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBnZXQgYWNjZXNzIHRva2VuOlwiLCB0b2tlbkVycm9yKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogYEZhaWxlZCB0byBnZXQgYWNjZXNzIHRva2VuOiAke3Rva2VuRXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgIG1lc3NhZ2U6IFwi44Ki44Kv44K744K544OI44O844Kv44Oz44Gu5Y+W5b6X44Gr5aSx5pWX44GX44G+44GX44GfXCIsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ3JlYXRlIGZvbGRlciBtZXRhZGF0YVxyXG4gICAgY29uc3QgZm9sZGVyTWV0YWRhdGEgPSB7XHJcbiAgICAgIG5hbWU6IGZvbGRlck5hbWUsXHJcbiAgICAgIHBhcmVudHM6IFtwYXJlbnRGb2xkZXJJZF0sXHJcbiAgICAgIG1pbWVUeXBlOiBcImFwcGxpY2F0aW9uL3ZuZC5nb29nbGUtYXBwcy5mb2xkZXJcIixcclxuICAgIH07XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJDcmVhdGluZyBmb2xkZXIgd2l0aCBtZXRhZGF0YTpcIiwgZm9sZGVyTWV0YWRhdGEpO1xyXG5cclxuICAgIC8vIENyZWF0ZSBmb2xkZXIgaW4gR29vZ2xlIERyaXZlXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxyXG4gICAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2RyaXZlL3YzL2ZpbGVzP3N1cHBvcnRzQWxsRHJpdmVzPXRydWVcIixcclxuICAgICAge1xyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAsXHJcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGZvbGRlck1ldGFkYXRhKSxcclxuICAgICAgfSxcclxuICAgICk7XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJHb29nbGUgRHJpdmUgQVBJIHJlc3BvbnNlIHN0YXR1czpcIiwgcmVzcG9uc2Uuc3RhdHVzKTtcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkdvb2dsZSBEcml2ZSBBUEkgZXJyb3IgcmVzcG9uc2U6XCIsIGVycm9yVGV4dCk7XHJcblxyXG4gICAgICAvLyBDaGVjayBpZiBpdCdzIGEgZHVwbGljYXRlIGZvbGRlciBlcnJvciAoZm9sZGVyIGFscmVhZHkgZXhpc3RzKVxyXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDkgfHwgZXJyb3JUZXh0LmluY2x1ZGVzKFwiYWxyZWFkeSBleGlzdHNcIikpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkZvbGRlciBtYXkgYWxyZWFkeSBleGlzdCwgY2hlY2tpbmcgZXhpc3RpbmcgZm9sZGVycy4uLlwiKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIC8vIFNlYXJjaCBmb3IgZXhpc3RpbmcgZm9sZGVyIHdpdGggc2FtZSBuYW1lXHJcbiAgICAgICAgICBjb25zdCBzZWFyY2hSZXNwb25zZSA9IGF3YWl0IGZldGNoKFxyXG4gICAgICAgICAgICBgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjMvZmlsZXM/cT1uYW1lPScke2VuY29kZVVSSUNvbXBvbmVudChmb2xkZXJOYW1lKX0nIGFuZCAnJHtwYXJlbnRGb2xkZXJJZH0nIGluIHBhcmVudHMgYW5kIG1pbWVUeXBlPSdhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuZm9sZGVyJyZzdXBwb3J0c0FsbERyaXZlcz10cnVlYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICBpZiAoc2VhcmNoUmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VhcmNoUmVzdWx0ID0gYXdhaXQgc2VhcmNoUmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICBpZiAoc2VhcmNoUmVzdWx0LmZpbGVzICYmIHNlYXJjaFJlc3VsdC5maWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdGb2xkZXIgPSBzZWFyY2hSZXN1bHQuZmlsZXNbMF07XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGb3VuZCBleGlzdGluZyBmb2xkZXI6XCIsIGV4aXN0aW5nRm9sZGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmb2xkZXJJZDogZXhpc3RpbmdGb2xkZXIuaWQsXHJcbiAgICAgICAgICAgICAgICBmb2xkZXJOYW1lOiBleGlzdGluZ0ZvbGRlci5uYW1lLFxyXG4gICAgICAgICAgICAgICAgd2ViVmlld0xpbms6IGBodHRwczovL2RyaXZlLmdvb2dsZS5jb20vZHJpdmUvZm9sZGVycy8ke2V4aXN0aW5nRm9sZGVyLmlkfWAsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIuWQjOWQjeOBruODleOCqeODq+ODgOOBjOaXouOBq+WtmOWcqOOBl+OBpuOBhOOBvuOBl+OBn++8iOS9v+eUqOWPr+iDve+8iVwiLFxyXG4gICAgICAgICAgICAgICAgaXNFeGlzdGluZzogdHJ1ZSxcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoc2VhcmNoRXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzZWFyY2hpbmcgZm9yIGV4aXN0aW5nIGZvbGRlcjpcIiwgc2VhcmNoRXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogYEdvb2dsZSBEcml2ZSBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAtICR7ZXJyb3JUZXh0fWAsXHJcbiAgICAgICAgd2ViVmlld0xpbms6IHBhcmVudEZvbGRlcklkXHJcbiAgICAgICAgICA/IGBodHRwczovL2RyaXZlLmdvb2dsZS5jb20vZHJpdmUvZm9sZGVycy8ke3BhcmVudEZvbGRlcklkfWBcclxuICAgICAgICAgIDogbnVsbCxcclxuICAgICAgICBtZXNzYWdlOiBg44OV44Kp44Or44OA5L2c5oiQQVBJ44Ko44Op44O877yIJHtyZXNwb25zZS5zdGF0dXN977yJYCxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBdCB0aGlzIHBvaW50LCB0aGUgQVBJIGNhbGwgd2FzIHN1Y2Nlc3NmdWwgLSBtYXJrIGZvbGRlciBhcyBjcmVhdGVkXHJcbiAgICBmb2xkZXJDcmVhdGVkID0gdHJ1ZTtcclxuICAgIGNvbnNvbGUubG9nKFwi4pyFIEdvb2dsZSBEcml2ZSBBUEkgY2FsbCBzdWNjZXNzZnVsLCBwYXJzaW5nIHJlc3BvbnNlLi4uXCIpO1xyXG5cclxuICAgIGxldCByZXN1bHQ7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwi4pyFIFJlc3BvbnNlIHBhcnNlZCBzdWNjZXNzZnVsbHk6XCIsIHJlc3VsdCk7XHJcblxyXG4gICAgICAvLyBFeHRyYWN0IGNyZWF0ZWQgZm9sZGVyIGRldGFpbHNcclxuICAgICAgY3JlYXRlZEZvbGRlcklkID0gcmVzdWx0LmlkO1xyXG4gICAgICBjcmVhdGVkRm9sZGVyTmFtZSA9IHJlc3VsdC5uYW1lO1xyXG4gICAgICB3ZWJWaWV3TGluayA9IGBodHRwczovL2RyaXZlLmdvb2dsZS5jb20vZHJpdmUvZm9sZGVycy8ke3Jlc3VsdC5pZH1gO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coXCLinIUgRm9sZGVyIGRldGFpbHMgZXh0cmFjdGVkOlwiLCB7XHJcbiAgICAgICAgaWQ6IGNyZWF0ZWRGb2xkZXJJZCxcclxuICAgICAgICBuYW1lOiBjcmVhdGVkRm9sZGVyTmFtZSxcclxuICAgICAgICB3ZWJWaWV3TGluayxcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLimqDvuI8gRXJyb3IgcGFyc2luZyByZXNwb25zZSBKU09OOlwiLCBwYXJzZUVycm9yKTtcclxuICAgICAgLy8gRXZlbiBpZiBwYXJzaW5nIGZhaWxzLCB0aGUgZm9sZGVyIHdhcyBjcmVhdGVkIChBUEkgcmV0dXJuZWQgMjAwLzIwMSlcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIGZvbGRlcklkOiBudWxsLCAvLyBXZSBkb24ndCBoYXZlIHRoZSBJRCBkdWUgdG8gcGFyc2UgZXJyb3JcclxuICAgICAgICBmb2xkZXJOYW1lOiBmb2xkZXJOYW1lLFxyXG4gICAgICAgIHdlYlZpZXdMaW5rOiBwYXJlbnRGb2xkZXJJZFxyXG4gICAgICAgICAgPyBgaHR0cHM6Ly9kcml2ZS5nb29nbGUuY29tL2RyaXZlL2ZvbGRlcnMvJHtwYXJlbnRGb2xkZXJJZH1gXHJcbiAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgbWVzc2FnZTpcclxuICAgICAgICAgIFwi44OV44Kp44Or44OA44Gv5L2c5oiQ44GV44KM44G+44GX44Gf44GM44CB6Kmz57Sw5oOF5aCx44Gu5Y+W5b6X44Gn44Ko44Op44O844GM55m655Sf44GX44G+44GX44GfXCIsXHJcbiAgICAgICAgd2FybmluZzogYFJlc3BvbnNlIHBhcnNlIGVycm9yOiAke3BhcnNlRXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKFwi4pyFIEdvb2dsZSBEcml2ZSBmb2xkZXIgY3JlYXRpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBmb2xkZXJJZDogcmVzdWx0LmlkLFxyXG4gICAgICBmb2xkZXJOYW1lOiByZXN1bHQubmFtZSxcclxuICAgICAgd2ViVmlld0xpbms6IHdlYlZpZXdMaW5rLFxyXG4gICAgICBtZXNzYWdlOiBcIkdvb2dsZSBEcml2ZeODleOCqeODq+ODgOOBjOato+W4uOOBq+S9nOaIkOOBleOCjOOBvuOBl+OBn1wiLFxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNyZWF0aW5nIEdvb2dsZSBEcml2ZSBmb2xkZXI6XCIsIHtcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgICAgZm9sZGVyTmFtZSxcclxuICAgICAgZm9sZGVyQ3JlYXRlZCxcclxuICAgICAgY3JlYXRlZEZvbGRlcklkLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gSWYgZm9sZGVyIHdhcyBjcmVhdGVkIGJ1dCB0aGVyZSB3YXMgYSBzdWJzZXF1ZW50IGVycm9yLCBzdGlsbCByZXR1cm4gc3VjY2Vzc1xyXG4gICAgaWYgKGZvbGRlckNyZWF0ZWQgJiYgY3JlYXRlZEZvbGRlcklkKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiRm9sZGVyIHdhcyBjcmVhdGVkIGRlc3BpdGUgZXJyb3IsIHJldHVybmluZyBzdWNjZXNzXCIpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgZm9sZGVySWQ6IGNyZWF0ZWRGb2xkZXJJZCxcclxuICAgICAgICBmb2xkZXJOYW1lOiBjcmVhdGVkRm9sZGVyTmFtZSxcclxuICAgICAgICB3ZWJWaWV3TGluazogd2ViVmlld0xpbmssXHJcbiAgICAgICAgbWVzc2FnZTogXCLjg5Xjgqnjg6vjg4Djga/kvZzmiJDjgZXjgozjgb7jgZfjgZ/vvIjkuIDpg6jorablkYrjgYLjgorvvIlcIixcclxuICAgICAgICB3YXJuaW5nOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcclxuICAgICAgd2ViVmlld0xpbms6IHByb2Nlc3MuZW52LkdPT0dMRV9EUklWRV9QQVJFTlRfRk9MREVSX0lEXHJcbiAgICAgICAgPyBgaHR0cHM6Ly9kcml2ZS5nb29nbGUuY29tL2RyaXZlL2ZvbGRlcnMvJHtwcm9jZXNzLmVudi5HT09HTEVfRFJJVkVfUEFSRU5UX0ZPTERFUl9JRH1gXHJcbiAgICAgICAgOiBudWxsLFxyXG4gICAgICBtZXNzYWdlOiBcIuODleOCqeODq+ODgOiHquWLleS9nOaIkOOBq+WkseaVl+OBl+OBvuOBl+OBn+OAguaJi+WLleOBp+S9nOaIkOOBl+OBpuOBj+OBoOOBleOBhOOAglwiLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldEFjY2Vzc1Rva2VuKGNyZWRlbnRpYWxzKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKFwiQ3JlYXRpbmcgSldUIHRva2VuLi4uXCIpO1xyXG5cclxuICAgIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApO1xyXG4gICAgY29uc3QgZXhwID0gbm93ICsgMzYwMDsgLy8gMSBob3VyIGV4cGlyYXRpb25cclxuXHJcbiAgICAvLyBDcmVhdGUgSldUIHBheWxvYWRcclxuICAgIGNvbnN0IHBheWxvYWQgPSB7XHJcbiAgICAgIGlzczogY3JlZGVudGlhbHMuY2xpZW50X2VtYWlsLFxyXG4gICAgICBzY29wZTogXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2RyaXZlLmZpbGVcIixcclxuICAgICAgYXVkOiBcImh0dHBzOi8vb2F1dGgyLmdvb2dsZWFwaXMuY29tL3Rva2VuXCIsXHJcbiAgICAgIGlhdDogbm93LFxyXG4gICAgICBleHA6IGV4cCxcclxuICAgIH07XHJcblxyXG4gICAgLy8gQ3JlYXRlIEpXVCB0b2tlblxyXG4gICAgY29uc3QgdG9rZW4gPSBjcmVhdGVKV1QocGF5bG9hZCwgY3JlZGVudGlhbHMucHJpdmF0ZV9rZXkpO1xyXG4gICAgY29uc29sZS5sb2coXCJKV1QgdG9rZW4gY3JlYXRlZCBzdWNjZXNzZnVsbHlcIik7XHJcblxyXG4gICAgLy8gRXhjaGFuZ2UgSldUIGZvciBhY2Nlc3MgdG9rZW5cclxuICAgIGNvbnNvbGUubG9nKFwiRXhjaGFuZ2luZyBKV1QgZm9yIGFjY2VzcyB0b2tlbi4uLlwiKTtcclxuICAgIGNvbnN0IHRva2VuUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vb2F1dGgyLmdvb2dsZWFwaXMuY29tL3Rva2VuXCIsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xyXG4gICAgICAgIGdyYW50X3R5cGU6IFwidXJuOmlldGY6cGFyYW1zOm9hdXRoOmdyYW50LXR5cGU6and0LWJlYXJlclwiLFxyXG4gICAgICAgIGFzc2VydGlvbjogdG9rZW4sXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJUb2tlbiBleGNoYW5nZSByZXNwb25zZSBzdGF0dXM6XCIsIHRva2VuUmVzcG9uc2Uuc3RhdHVzKTtcclxuXHJcbiAgICBpZiAoIXRva2VuUmVzcG9uc2Uub2spIHtcclxuICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgdG9rZW5SZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJUb2tlbiBleGNoYW5nZSBlcnJvciByZXNwb25zZTpcIiwgZXJyb3JUZXh0KTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgIGBUb2tlbiBleGNoYW5nZSBmYWlsZWQ6ICR7dG9rZW5SZXNwb25zZS5zdGF0dXN9IC0gJHtlcnJvclRleHR9YCxcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0b2tlbkRhdGEgPSBhd2FpdCB0b2tlblJlc3BvbnNlLmpzb24oKTtcclxuICAgIGNvbnNvbGUubG9nKFwiQWNjZXNzIHRva2VuIG9idGFpbmVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuICAgIHJldHVybiB0b2tlbkRhdGEuYWNjZXNzX3Rva2VuO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gZ2V0QWNjZXNzVG9rZW46XCIsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlSldUKHBheWxvYWQsIHByaXZhdGVLZXkpIHtcclxuICAvLyBKV1QgSGVhZGVyXHJcbiAgY29uc3QgaGVhZGVyID0ge1xyXG4gICAgYWxnOiBcIlJTMjU2XCIsXHJcbiAgICB0eXA6IFwiSldUXCIsXHJcbiAgfTtcclxuXHJcbiAgLy8gQmFzZTY0VVJMIGVuY29kZSBoZWFkZXIgYW5kIHBheWxvYWRcclxuICBjb25zdCBlbmNvZGVkSGVhZGVyID0gYmFzZTY0VXJsRW5jb2RlKEpTT04uc3RyaW5naWZ5KGhlYWRlcikpO1xyXG4gIGNvbnN0IGVuY29kZWRQYXlsb2FkID0gYmFzZTY0VXJsRW5jb2RlKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKTtcclxuXHJcbiAgLy8gQ3JlYXRlIHNpZ25hdHVyZSBpbnB1dFxyXG4gIGNvbnN0IHNpZ25hdHVyZUlucHV0ID0gYCR7ZW5jb2RlZEhlYWRlcn0uJHtlbmNvZGVkUGF5bG9hZH1gO1xyXG5cclxuICAvLyBTaWduIHVzaW5nIE5vZGUuanMgY3J5cHRvXHJcbiAgY29uc3Qgc2lnbiA9IGNyZWF0ZVNpZ24oXCJSU0EtU0hBMjU2XCIpO1xyXG4gIHNpZ24udXBkYXRlKHNpZ25hdHVyZUlucHV0KTtcclxuICBzaWduLmVuZCgpO1xyXG5cclxuICBjb25zdCBzaWduYXR1cmUgPSBzaWduLnNpZ24ocHJpdmF0ZUtleSk7XHJcbiAgY29uc3QgZW5jb2RlZFNpZ25hdHVyZSA9IGJhc2U2NFVybEVuY29kZShzaWduYXR1cmUpO1xyXG5cclxuICByZXR1cm4gYCR7c2lnbmF0dXJlSW5wdXR9LiR7ZW5jb2RlZFNpZ25hdHVyZX1gO1xyXG59XHJcblxyXG5mdW5jdGlvbiBiYXNlNjRVcmxFbmNvZGUoc3RyKSB7XHJcbiAgLy8gQ29udmVydCBzdHJpbmcgb3IgYnVmZmVyIHRvIGJhc2U2NHVybFxyXG4gIGxldCBidWZmZXI7XHJcbiAgaWYgKHR5cGVvZiBzdHIgPT09IFwic3RyaW5nXCIpIHtcclxuICAgIGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKHN0ciwgXCJ1dGY4XCIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBidWZmZXIgPSBCdWZmZXIuZnJvbShzdHIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGJ1ZmZlclxyXG4gICAgLnRvU3RyaW5nKFwiYmFzZTY0XCIpXHJcbiAgICAucmVwbGFjZSgvXFwrL2csIFwiLVwiKVxyXG4gICAgLnJlcGxhY2UoL1xcLy9nLCBcIl9cIilcclxuICAgIC5yZXBsYWNlKC89L2csIFwiXCIpO1xyXG59XHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJjcmVhdGVTaWduIiwiY2hlY2tQYXJlbnRGb2xkZXJBY2Nlc3MiLCJzZXJ2aWNlQWNjb3VudEtleSIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfU0VSVklDRV9BQ0NPVU5UX0tFWSIsInBhcmVudEZvbGRlcklkIiwiR09PR0xFX0RSSVZFX1BBUkVOVF9GT0xERVJfSUQiLCJzdWNjZXNzIiwiZXJyb3IiLCJpc1dhcm5pbmciLCJjcmVkZW50aWFscyIsIkpTT04iLCJwYXJzZSIsImFjY2Vzc1Rva2VuIiwiZ2V0QWNjZXNzVG9rZW4iLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJvayIsImVycm9yVGV4dCIsInRleHQiLCJzdGF0dXMiLCJzZXJ2aWNlQWNjb3VudCIsImNsaWVudF9lbWFpbCIsImlzU2hhcmVkRHJpdmUiLCJzdWdnZXN0aW9uIiwiZm9sZGVySW5mbyIsImpzb24iLCJpc0luU2hhcmVkRHJpdmUiLCJkcml2ZUlkIiwicGFyZW50Rm9sZGVySW5mbyIsInBhcmVudHMiLCJsZW5ndGgiLCJwYXJlbnRSZXNwb25zZSIsImUiLCJzaGFyZWREcml2ZUluZm8iLCJkcml2ZVJlc3BvbnNlIiwibWVzc2FnZSIsImhpZXJhcmNoeSIsImlzSW5TdWJmb2xkZXIiLCJwYXJlbnRGb2xkZXJOYW1lIiwibmFtZSIsInNoYXJlZERyaXZlTmFtZSIsImNyZWF0ZUdvb2dsZURyaXZlRm9sZGVyIiwiZm9sZGVyTmFtZSIsImZvbGRlckNyZWF0ZWQiLCJjcmVhdGVkRm9sZGVySWQiLCJjcmVhdGVkRm9sZGVyTmFtZSIsIndlYlZpZXdMaW5rIiwiY29uc29sZSIsImxvZyIsImZvbGRlcklkIiwicGFyc2VFcnJvciIsInRva2VuRXJyb3IiLCJmb2xkZXJNZXRhZGF0YSIsIm1pbWVUeXBlIiwiYm9keSIsInN0cmluZ2lmeSIsImluY2x1ZGVzIiwic2VhcmNoUmVzcG9uc2UiLCJlbmNvZGVVUklDb21wb25lbnQiLCJzZWFyY2hSZXN1bHQiLCJmaWxlcyIsImV4aXN0aW5nRm9sZGVyIiwiaWQiLCJpc0V4aXN0aW5nIiwic2VhcmNoRXJyb3IiLCJyZXN1bHQiLCJ3YXJuaW5nIiwibm93IiwiTWF0aCIsImZsb29yIiwiRGF0ZSIsImV4cCIsInBheWxvYWQiLCJpc3MiLCJzY29wZSIsImF1ZCIsImlhdCIsInRva2VuIiwiY3JlYXRlSldUIiwicHJpdmF0ZV9rZXkiLCJ0b2tlblJlc3BvbnNlIiwiVVJMU2VhcmNoUGFyYW1zIiwiZ3JhbnRfdHlwZSIsImFzc2VydGlvbiIsIkVycm9yIiwidG9rZW5EYXRhIiwiYWNjZXNzX3Rva2VuIiwicHJpdmF0ZUtleSIsImhlYWRlciIsImFsZyIsInR5cCIsImVuY29kZWRIZWFkZXIiLCJiYXNlNjRVcmxFbmNvZGUiLCJlbmNvZGVkUGF5bG9hZCIsInNpZ25hdHVyZUlucHV0Iiwic2lnbiIsInVwZGF0ZSIsImVuZCIsInNpZ25hdHVyZSIsImVuY29kZWRTaWduYXR1cmUiLCJzdHIiLCJidWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJyZXBsYWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/utils/googleDrive.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.js":
/*!***********************!*\
  !*** ./src/lib/db.js ***!
  \***********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   query: () => (/* binding */ query)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// src/lib/db.js\n\nconst connectionString = process.env.DATABASE_URL;\n// 開発中にホットリロードで Pool が増殖しないようにするおまじない\nlet _pool;\nif (!global._pgPool) {\n    global._pgPool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n        connectionString\n    });\n}\n_pool = global._pgPool;\nasync function query(text, params) {\n    const client = await _pool.connect();\n    try {\n        const res = await client.query(text, params);\n        return res;\n    } finally{\n        client.release();\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsZ0JBQWdCO0FBQ1U7QUFFMUIsTUFBTUMsbUJBQW1CQyxRQUFRQyxHQUFHLENBQUNDLFlBQVk7QUFFakQscUNBQXFDO0FBQ3JDLElBQUlDO0FBRUosSUFBSSxDQUFDQyxPQUFPQyxPQUFPLEVBQUU7SUFDbkJELE9BQU9DLE9BQU8sR0FBRyxJQUFJUCxvQ0FBSUEsQ0FBQztRQUN4QkM7SUFFRjtBQUNGO0FBRUFJLFFBQVFDLE9BQU9DLE9BQU87QUFFZixlQUFlQyxNQUFNQyxJQUFJLEVBQUVDLE1BQU07SUFDdEMsTUFBTUMsU0FBUyxNQUFNTixNQUFNTyxPQUFPO0lBQ2xDLElBQUk7UUFDRixNQUFNQyxNQUFNLE1BQU1GLE9BQU9ILEtBQUssQ0FBQ0MsTUFBTUM7UUFDckMsT0FBT0c7SUFDVCxTQUFVO1FBQ1JGLE9BQU9HLE9BQU87SUFDaEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FuLWthbi13ZWIvLi9zcmMvbGliL2RiLmpzPzdmOWEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9kYi5qc1xyXG5pbXBvcnQgeyBQb29sIH0gZnJvbSBcInBnXCI7XHJcblxyXG5jb25zdCBjb25uZWN0aW9uU3RyaW5nID0gcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMO1xyXG5cclxuLy8g6ZaL55m65Lit44Gr44Ob44OD44OI44Oq44Ot44O844OJ44GnIFBvb2wg44GM5aKX5q6W44GX44Gq44GE44KI44GG44Gr44GZ44KL44GK44G+44GY44Gq44GEXHJcbmxldCBfcG9vbDtcclxuXHJcbmlmICghZ2xvYmFsLl9wZ1Bvb2wpIHtcclxuICBnbG9iYWwuX3BnUG9vbCA9IG5ldyBQb29sKHtcclxuICAgIGNvbm5lY3Rpb25TdHJpbmcsXHJcbiAgICAvLyDlv4XopoHjgarjgokgc3NsOiB7IHJlamVjdFVuYXV0aG9yaXplZDogZmFsc2UgfSDjgpLku5jjgZHjgovvvIhSYWlsd2F544Gu6Kit5a6a5qyh56ys77yJXHJcbiAgfSk7XHJcbn1cclxuXHJcbl9wb29sID0gZ2xvYmFsLl9wZ1Bvb2w7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcXVlcnkodGV4dCwgcGFyYW1zKSB7XHJcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgX3Bvb2wuY29ubmVjdCgpO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBjbGllbnQucXVlcnkodGV4dCwgcGFyYW1zKTtcclxuICAgIHJldHVybiByZXM7XHJcbiAgfSBmaW5hbGx5IHtcclxuICAgIGNsaWVudC5yZWxlYXNlKCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJQb29sIiwiY29ubmVjdGlvblN0cmluZyIsInByb2Nlc3MiLCJlbnYiLCJEQVRBQkFTRV9VUkwiLCJfcG9vbCIsImdsb2JhbCIsIl9wZ1Bvb2wiLCJxdWVyeSIsInRleHQiLCJwYXJhbXMiLCJjbGllbnQiLCJjb25uZWN0IiwicmVzIiwicmVsZWFzZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprojects%2Froute&page=%2Fapi%2Fprojects%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprojects%2Froute.js&appDir=C%3A%5CUsers%5CDELL%5CDesktop%5C%E4%BD%9C%E6%88%90%E3%82%A2%E3%83%97%E3%83%AA%5CAN-KAN%5Capps%5Cweb%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDELL%5CDesktop%5C%E4%BD%9C%E6%88%90%E3%82%A2%E3%83%97%E3%83%AA%5CAN-KAN%5Capps%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();
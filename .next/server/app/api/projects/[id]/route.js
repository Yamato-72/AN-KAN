"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/projects/[id]/route";
exports.ids = ["app/api/projects/[id]/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = import("pg");;

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprojects%2F%5Bid%5D%2Froute&page=%2Fapi%2Fprojects%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprojects%2F%5Bid%5D%2Froute.js&appDir=C%3A%5CUsers%5CDELL%5CDesktop%5C%E4%BD%9C%E6%88%90%E3%82%A2%E3%83%97%E3%83%AA%5CAN-KAN%5Capps%5Cweb%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDELL%5CDesktop%5C%E4%BD%9C%E6%88%90%E3%82%A2%E3%83%97%E3%83%AA%5CAN-KAN%5Capps%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprojects%2F%5Bid%5D%2Froute&page=%2Fapi%2Fprojects%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprojects%2F%5Bid%5D%2Froute.js&appDir=C%3A%5CUsers%5CDELL%5CDesktop%5C%E4%BD%9C%E6%88%90%E3%82%A2%E3%83%97%E3%83%AA%5CAN-KAN%5Capps%5Cweb%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDELL%5CDesktop%5C%E4%BD%9C%E6%88%90%E3%82%A2%E3%83%97%E3%83%AA%5CAN-KAN%5Capps%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_DELL_Desktop_AN_KAN_apps_web_src_app_api_projects_id_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/projects/[id]/route.js */ \"(rsc)/./src/app/api/projects/[id]/route.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([C_Users_DELL_Desktop_AN_KAN_apps_web_src_app_api_projects_id_route_js__WEBPACK_IMPORTED_MODULE_3__]);\nC_Users_DELL_Desktop_AN_KAN_apps_web_src_app_api_projects_id_route_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/projects/[id]/route\",\n        pathname: \"/api/projects/[id]\",\n        filename: \"route\",\n        bundlePath: \"app/api/projects/[id]/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\DELL\\\\Desktop\\\\作成アプリ\\\\AN-KAN\\\\apps\\\\web\\\\src\\\\app\\\\api\\\\projects\\\\[id]\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_DELL_Desktop_AN_KAN_apps_web_src_app_api_projects_id_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/projects/[id]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9qZWN0cyUyRiU1QmlkJTVEJTJGcm91dGUmcGFnZT0lMkZhcGklMkZwcm9qZWN0cyUyRiU1QmlkJTVEJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcHJvamVjdHMlMkYlNUJpZCU1RCUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNERUxMJTVDRGVza3RvcCU1QyVFNCVCRCU5QyVFNiU4OCU5MCVFMyU4MiVBMiVFMyU4MyU5NyVFMyU4MyVBQSU1Q0FOLUtBTiU1Q2FwcHMlNUN3ZWIlNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0RFTEwlNUNEZXNrdG9wJTVDJUU0JUJEJTlDJUU2JTg4JTkwJUUzJTgyJUEyJUUzJTgzJTk3JUUzJTgzJUFBJTVDQU4tS0FOJTVDYXBwcyU1Q3dlYiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDMkM7QUFDeEg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbi1rYW4td2ViLz8xMDFkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXERFTExcXFxcRGVza3RvcFxcXFzkvZzmiJDjgqLjg5fjg6pcXFxcQU4tS0FOXFxcXGFwcHNcXFxcd2ViXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHByb2plY3RzXFxcXFtpZF1cXFxccm91dGUuanNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Byb2plY3RzL1tpZF0vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wcm9qZWN0cy9baWRdXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9wcm9qZWN0cy9baWRdL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcREVMTFxcXFxEZXNrdG9wXFxcXOS9nOaIkOOCouODl+ODqlxcXFxBTi1LQU5cXFxcYXBwc1xcXFx3ZWJcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxccHJvamVjdHNcXFxcW2lkXVxcXFxyb3V0ZS5qc1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcHJvamVjdHMvW2lkXS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprojects%2F%5Bid%5D%2Froute&page=%2Fapi%2Fprojects%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprojects%2F%5Bid%5D%2Froute.js&appDir=C%3A%5CUsers%5CDELL%5CDesktop%5C%E4%BD%9C%E6%88%90%E3%82%A2%E3%83%97%E3%83%AA%5CAN-KAN%5Capps%5Cweb%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDELL%5CDesktop%5C%E4%BD%9C%E6%88%90%E3%82%A2%E3%83%97%E3%83%AA%5CAN-KAN%5Capps%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/projects/[id]/route.js":
/*!********************************************!*\
  !*** ./src/app/api/projects/[id]/route.js ***!
  \********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var _app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/app/api/utils/sql */ \"(rsc)/./src/app/api/utils/sql.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__]);\n_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nasync function GET(request, { params }) {\n    try {\n        const { id } = params;\n        // Get project information with staff member name and client information\n        const project = await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n      SELECT \r\n        p.*, \r\n        s.name as assigned_team_member_name, \r\n        s.code as assigned_team_member_code,\r\n        c.client_name,\r\n        c.company_address,\r\n        c.phone_number,\r\n        c.contact_person,\r\n        c.email,\r\n        p.drive_folder_id,\r\n        p.drive_folder_link\r\n      FROM projects p\r\n      LEFT JOIN staff_members s ON p.assigned_team_member = s.code\r\n      LEFT JOIN clients c ON p.client_id = c.id\r\n      WHERE p.id = ${id}\r\n    `;\n        if (project.length === 0) {\n            return Response.json({\n                error: \"Project not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Get project milestones\n        const milestones = await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n      SELECT *\r\n      FROM project_milestones\r\n      WHERE project_id = ${id}\r\n      ORDER BY due_date ASC\r\n    `;\n        // Get project activities\n        const activities = await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n      SELECT *\r\n      FROM project_activities pa\r\n      WHERE pa.project_id = ${id}\r\n      ORDER BY pa.created_at DESC\r\n      LIMIT 20\r\n    `;\n        // Get project documents\n        const documents = await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n      SELECT *\r\n      FROM project_documents\r\n      WHERE project_id = ${id}\r\n      ORDER BY created_at DESC\r\n    `;\n        const projectData = {\n            ...project[0],\n            milestones,\n            activities,\n            documents\n        };\n        return Response.json(projectData);\n    } catch (error) {\n        console.error(\"Error fetching project:\", error);\n        return Response.json({\n            error: \"Failed to fetch project\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PUT(request, { params }) {\n    try {\n        const { id } = params;\n        const body = await request.json();\n        const { ad_number, project_name, client_name, inquiry_date, status, completion_percentage, assigned_team_member, delivery_date, installation_date, installation_contractor, remarks, product_number, address, phone_number, estimated_amount, company_address, contact_person, email } = body;\n        // Check if project exists and get current project info with client data\n        const existingProject = await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n      SELECT \r\n        p.*,\r\n        c.client_name as current_client_name,\r\n        c.company_address as current_company_address,\r\n        c.phone_number as current_phone_number,\r\n        c.contact_person as current_contact_person,\r\n        c.email as current_email\r\n      FROM projects p\r\n      LEFT JOIN clients c ON p.client_id = c.id\r\n      WHERE p.id = ${id}\r\n    `;\n        if (existingProject.length === 0) {\n            return Response.json({\n                error: \"Project not found\"\n            }, {\n                status: 404\n            });\n        }\n        const oldProject = existingProject[0];\n        let clientId = oldProject.client_id;\n        // Handle client information updates\n        const clientFieldsChanged = client_name !== undefined && client_name !== oldProject.current_client_name || company_address !== undefined && company_address !== oldProject.current_company_address || phone_number !== undefined && phone_number !== oldProject.current_phone_number || contact_person !== undefined && contact_person !== oldProject.current_contact_person || email !== undefined && email !== oldProject.current_email;\n        if (clientFieldsChanged) {\n            if (clientId) {\n                // Update existing client\n                const clientUpdates = [];\n                const clientValues = [];\n                let clientParamCount = 0;\n                if (client_name !== undefined) {\n                    clientParamCount++;\n                    clientUpdates.push(`client_name = $${clientParamCount}`);\n                    clientValues.push(client_name);\n                }\n                if (company_address !== undefined) {\n                    clientParamCount++;\n                    clientUpdates.push(`company_address = $${clientParamCount}`);\n                    clientValues.push(company_address || null);\n                }\n                if (phone_number !== undefined) {\n                    clientParamCount++;\n                    clientUpdates.push(`phone_number = $${clientParamCount}`);\n                    clientValues.push(phone_number || null);\n                }\n                if (contact_person !== undefined) {\n                    clientParamCount++;\n                    clientUpdates.push(`contact_person = $${clientParamCount}`);\n                    clientValues.push(contact_person || null);\n                }\n                if (email !== undefined) {\n                    clientParamCount++;\n                    clientUpdates.push(`email = $${clientParamCount}`);\n                    clientValues.push(email || null);\n                }\n                if (clientUpdates.length > 0) {\n                    // Add updated_at\n                    clientParamCount++;\n                    clientUpdates.push(`updated_at = $${clientParamCount}`);\n                    clientValues.push(new Date().toISOString());\n                    // Add client_id for WHERE clause\n                    clientParamCount++;\n                    clientValues.push(clientId);\n                    const clientUpdateQuery = `\r\n            UPDATE clients \r\n            SET ${clientUpdates.join(\", \")}\r\n            WHERE id = $${clientParamCount}\r\n          `;\n                    await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(clientUpdateQuery, clientValues);\n                }\n            } else {\n                // Create new client if not exists\n                const clientResult = await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n          INSERT INTO clients (\r\n            client_name,\r\n            company_address,\r\n            phone_number,\r\n            contact_person,\r\n            email\r\n          ) VALUES (\r\n            ${client_name || \"未設定\"},\r\n            ${company_address || null},\r\n            ${phone_number || null},\r\n            ${contact_person || null},\r\n            ${email || null}\r\n          )\r\n          RETURNING id\r\n        `;\n                clientId = clientResult[0].id;\n            }\n        }\n        // Handle project information updates\n        const updates = [];\n        const values = [];\n        let paramCount = 0;\n        if (ad_number !== undefined) {\n            paramCount++;\n            updates.push(`ad_number = $${paramCount}`);\n            values.push(parseInt(ad_number) || null);\n        }\n        if (project_name !== undefined) {\n            paramCount++;\n            updates.push(`project_name = $${paramCount}`);\n            values.push(project_name);\n        }\n        if (inquiry_date !== undefined) {\n            paramCount++;\n            updates.push(`inquiry_date = $${paramCount}`);\n            values.push(inquiry_date ? new Date(inquiry_date) : null);\n        }\n        if (status !== undefined) {\n            paramCount++;\n            updates.push(`status = $${paramCount}`);\n            values.push(status);\n        }\n        if (completion_percentage !== undefined) {\n            paramCount++;\n            updates.push(`completion_percentage = $${paramCount}`);\n            values.push(completion_percentage);\n        }\n        if (delivery_date !== undefined) {\n            paramCount++;\n            updates.push(`delivery_date = $${paramCount}`);\n            values.push(delivery_date ? new Date(delivery_date) : null);\n        }\n        if (installation_date !== undefined) {\n            paramCount++;\n            updates.push(`installation_date = $${paramCount}`);\n            values.push(installation_date ? new Date(installation_date) : null);\n        }\n        if (installation_contractor !== undefined) {\n            paramCount++;\n            updates.push(`installation_contractor = $${paramCount}`);\n            values.push(installation_contractor);\n        }\n        if (remarks !== undefined) {\n            paramCount++;\n            updates.push(`remarks = $${paramCount}`);\n            values.push(remarks);\n        }\n        if (product_number !== undefined) {\n            paramCount++;\n            updates.push(`product_number = $${paramCount}`);\n            values.push(product_number);\n        }\n        if (address !== undefined) {\n            paramCount++;\n            updates.push(`address = $${paramCount}`);\n            values.push(address);\n        }\n        if (estimated_amount !== undefined) {\n            paramCount++;\n            updates.push(`estimated_amount = $${paramCount}`);\n            values.push(estimated_amount ? parseFloat(estimated_amount) : null);\n        }\n        // Update client_id if changed\n        if (clientFieldsChanged && clientId !== oldProject.client_id) {\n            paramCount++;\n            updates.push(`client_id = $${paramCount}`);\n            values.push(clientId);\n        }\n        let updatedProject = oldProject;\n        if (updates.length > 0) {\n            // Add updated_at\n            paramCount++;\n            updates.push(`updated_at = $${paramCount}`);\n            values.push(new Date().toISOString());\n            // Add id for WHERE clause\n            paramCount++;\n            values.push(id);\n            const updateQuery = `\r\n        UPDATE projects \r\n        SET ${updates.join(\", \")}\r\n        WHERE id = $${paramCount}\r\n        RETURNING *\r\n      `;\n            const result = await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(updateQuery, values);\n            updatedProject = result[0];\n        }\n        // Log various activity changes\n        // Status change log\n        if (status && status !== oldProject.status) {\n            await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n        INSERT INTO project_activities (project_id, activity_type, description)\r\n        VALUES (${id}, 'status_update', ${`ステータスが「${oldProject.status}」から「${status}」に変更されました`})\r\n      `;\n        }\n        // Client name change log\n        if (client_name !== undefined && client_name !== oldProject.current_client_name) {\n            await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n        INSERT INTO project_activities (project_id, activity_type, description)\r\n        VALUES (${id}, 'client_update', ${`取引先名が「${oldProject.current_client_name}」から「${client_name}」に変更されました`})\r\n      `;\n        }\n        // Contact person change log\n        if (contact_person !== undefined && contact_person !== oldProject.current_contact_person) {\n            const oldContact = oldProject.current_contact_person || \"未設定\";\n            const newContact = contact_person || \"未設定\";\n            await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n        INSERT INTO project_activities (project_id, activity_type, description)\r\n        VALUES (${id}, 'contact_person_update', ${`担当者名が「${oldContact}」から「${newContact}」に変更されました`})\r\n      `;\n        }\n        // Email change log\n        if (email !== undefined && email !== oldProject.current_email) {\n            const oldEmail = oldProject.current_email || \"未設定\";\n            const newEmail = email || \"未設定\";\n            await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n        INSERT INTO project_activities (project_id, activity_type, description)\r\n        VALUES (${id}, 'email_update', ${`メールアドレスが「${oldEmail}」から「${newEmail}」に変更されました`})\r\n      `;\n        }\n        // Company address change log\n        if (company_address !== undefined && company_address !== oldProject.current_company_address) {\n            const oldCompanyAddress = oldProject.current_company_address || \"未設定\";\n            const newCompanyAddress = company_address || \"未設定\";\n            await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n        INSERT INTO project_activities (project_id, activity_type, description)\r\n        VALUES (${id}, 'company_address_update', ${`会社住所が「${oldCompanyAddress}」から「${newCompanyAddress}」に変更されました`})\r\n      `;\n        }\n        // Phone number change log\n        if (phone_number !== undefined && phone_number !== oldProject.current_phone_number) {\n            const oldPhone = oldProject.current_phone_number || \"未設定\";\n            const newPhone = phone_number || \"未設定\";\n            await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n        INSERT INTO project_activities (project_id, activity_type, description)\r\n        VALUES (${id}, 'phone_update', ${`電話番号が「${oldPhone}」から「${newPhone}」に変更されました`})\r\n      `;\n        }\n        // Address change log (installation address)\n        if (address !== undefined && address !== oldProject.address) {\n            const oldAddress = oldProject.address || \"未設定\";\n            const newAddress = address || \"未設定\";\n            await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n        INSERT INTO project_activities (project_id, activity_type, description)\r\n        VALUES (${id}, 'address_update', ${`設置先住所が「${oldAddress}」から「${newAddress}」に変更されました`})\r\n      `;\n        }\n        // Inquiry date change log\n        if (inquiry_date !== undefined) {\n            const oldDate = oldProject.inquiry_date ? new Date(oldProject.inquiry_date).toISOString().split(\"T\")[0] : null;\n            const newDate = inquiry_date || null;\n            if (oldDate !== newDate) {\n                const oldDateStr = oldDate ? new Date(oldDate).toLocaleDateString(\"ja-JP\") : \"未設定\";\n                const newDateStr = newDate ? new Date(newDate).toLocaleDateString(\"ja-JP\") : \"未設定\";\n                await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n          INSERT INTO project_activities (project_id, activity_type, description)\r\n          VALUES (${id}, 'inquiry_date_update', ${`問い合わせ日が「${oldDateStr}」から「${newDateStr}」に変更されました`})\r\n        `;\n            }\n        }\n        // Delivery date change log\n        if (delivery_date !== undefined) {\n            const oldDate = oldProject.delivery_date ? new Date(oldProject.delivery_date).toISOString().split(\"T\")[0] : null;\n            const newDate = delivery_date || null;\n            if (oldDate !== newDate) {\n                const oldDateStr = oldDate ? new Date(oldDate).toLocaleDateString(\"ja-JP\") : \"未設定\";\n                const newDateStr = newDate ? new Date(newDate).toLocaleDateString(\"ja-JP\") : \"未設定\";\n                await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n          INSERT INTO project_activities (project_id, activity_type, description)\r\n          VALUES (${id}, 'delivery_date_update', ${`納期が「${oldDateStr}」から「${newDateStr}」に変更されました`})\r\n        `;\n            }\n        }\n        // Installation date change log\n        if (installation_date !== undefined) {\n            const oldDate = oldProject.installation_date ? new Date(oldProject.installation_date).toISOString().split(\"T\")[0] : null;\n            const newDate = installation_date || null;\n            if (oldDate !== newDate) {\n                const oldDateStr = oldDate ? new Date(oldDate).toLocaleDateString(\"ja-JP\") : \"未設定\";\n                const newDateStr = newDate ? new Date(newDate).toLocaleDateString(\"ja-JP\") : \"未設定\";\n                await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n          INSERT INTO project_activities (project_id, activity_type, description)\r\n          VALUES (${id}, 'installation_date_update', ${`設置日が「${oldDateStr}」から「${newDateStr}」に変更されました`})\r\n        `;\n            }\n        }\n        // Installation contractor change log\n        if (installation_contractor !== undefined && installation_contractor !== oldProject.installation_contractor) {\n            const oldContractor = oldProject.installation_contractor || \"未設定\";\n            const newContractor = installation_contractor || \"未設定\";\n            await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n        INSERT INTO project_activities (project_id, activity_type, description)\r\n        VALUES (${id}, 'contractor_update', ${`設置業者が「${oldContractor}」から「${newContractor}」に変更されました`})\r\n      `;\n        }\n        // Project name change log\n        if (project_name !== undefined && project_name !== oldProject.project_name) {\n            await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n        INSERT INTO project_activities (project_id, activity_type, description)\r\n        VALUES (${id}, 'name_update', ${`プロジェクト名が「${oldProject.project_name}」から「${project_name}」に変更されました`})\r\n      `;\n        }\n        // Assigned team member change log\n        if (assigned_team_member !== undefined) {\n            let assignedCode = null;\n            if (assigned_team_member) {\n                if (typeof assigned_team_member === \"number\") {\n                    const staff = await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`SELECT code, name FROM staff_members WHERE id = ${assigned_team_member}`;\n                    if (staff.length > 0) {\n                        assignedCode = staff[0].code;\n                    }\n                } else if (typeof assigned_team_member === \"string\" && assigned_team_member.match(/^[A-Z]$/)) {\n                    assignedCode = assigned_team_member;\n                }\n            }\n            if (assignedCode !== oldProject.assigned_team_member) {\n                // Get staff names for log\n                const oldStaff = oldProject.assigned_team_member ? await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`SELECT name FROM staff_members WHERE code = ${oldProject.assigned_team_member}` : [];\n                const newStaff = assignedCode ? await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`SELECT name FROM staff_members WHERE code = ${assignedCode}` : [];\n                const oldStaffName = oldStaff.length > 0 ? oldStaff[0].name : \"未設定\";\n                const newStaffName = newStaff.length > 0 ? newStaff[0].name : \"未設定\";\n                await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n          INSERT INTO project_activities (project_id, activity_type, description)\r\n          VALUES (${id}, 'assignee_update', ${`担当者が「${oldStaffName}」から「${newStaffName}」に変更されました`})\r\n        `;\n            }\n        }\n        // Remarks change log\n        if (remarks !== undefined && remarks !== oldProject.remarks) {\n            await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n        INSERT INTO project_activities (project_id, activity_type, description)\r\n        VALUES (${id}, 'remarks_update', ${`備考が変更されました`})\r\n      `;\n        }\n        // Product number change log\n        if (product_number !== undefined && product_number !== oldProject.product_number) {\n            const oldProductNumber = oldProject.product_number || \"未設定\";\n            const newProductNumber = product_number || \"未設定\";\n            await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n        INSERT INTO project_activities (project_id, activity_type, description)\r\n        VALUES (${id}, 'product_number_update', ${`製品番号が「${oldProductNumber}」から「${newProductNumber}」に変更されました`})\r\n      `;\n        }\n        // AD number change log\n        if (ad_number !== undefined && parseInt(ad_number) !== oldProject.ad_number) {\n            const oldAdNumber = oldProject.ad_number || \"未設定\";\n            const newAdNumber = ad_number || \"未設定\";\n            await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n        INSERT INTO project_activities (project_id, activity_type, description)\r\n        VALUES (${id}, 'ad_number_update', ${`AD番号が「${oldAdNumber}」から「${newAdNumber}」に変更されました`})\r\n      `;\n        }\n        // Estimated amount change log\n        if (estimated_amount !== undefined && parseFloat(estimated_amount || 0) !== parseFloat(oldProject.estimated_amount || 0)) {\n            const oldAmount = oldProject.estimated_amount ? `¥${Number(oldProject.estimated_amount).toLocaleString()}` : \"未設定\";\n            const newAmount = estimated_amount ? `¥${Number(estimated_amount).toLocaleString()}` : \"未設定\";\n            await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n        INSERT INTO project_activities (project_id, activity_type, description)\r\n        VALUES (${id}, 'estimated_amount_update', ${`見積額が「${oldAmount}」から「${newAmount}」に変更されました`})\r\n      `;\n        }\n        return Response.json(updatedProject);\n    } catch (error) {\n        console.error(\"Error updating project:\", error);\n        return Response.json({\n            error: \"Failed to update project\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE(request, { params }) {\n    try {\n        const { id } = params;\n        // Check if project exists\n        const existingProject = await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`\r\n      SELECT * FROM projects WHERE id = ${id}\r\n    `;\n        if (existingProject.length === 0) {\n            return Response.json({\n                error: \"Project not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Delete project (cascades to related tables)\n        await (0,_app_api_utils_sql__WEBPACK_IMPORTED_MODULE_0__[\"default\"])`DELETE FROM projects WHERE id = ${id}`;\n        return Response.json({\n            message: \"Project deleted successfully\"\n        });\n    } catch (error) {\n        console.error(\"Error deleting project:\", error);\n        return Response.json({\n            error: \"Failed to delete project\"\n        }, {\n            status: 500\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9wcm9qZWN0cy9baWRdL3JvdXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBc0M7QUFFL0IsZUFBZUMsSUFBSUMsT0FBTyxFQUFFLEVBQUVDLE1BQU0sRUFBRTtJQUMzQyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxFQUFFLEVBQUUsR0FBR0Q7UUFFZix3RUFBd0U7UUFDeEUsTUFBTUUsVUFBVSxNQUFNTCw4REFBRyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7bUJBZVgsRUFBRUksR0FBRztJQUNwQixDQUFDO1FBRUQsSUFBSUMsUUFBUUMsTUFBTSxLQUFLLEdBQUc7WUFDeEIsT0FBT0MsU0FBU0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQW9CLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNyRTtRQUVBLHlCQUF5QjtRQUN6QixNQUFNQyxhQUFhLE1BQU1YLDhEQUFHLENBQUM7Ozt5QkFHUixFQUFFSSxHQUFHOztJQUUxQixDQUFDO1FBRUQseUJBQXlCO1FBQ3pCLE1BQU1RLGFBQWEsTUFBTVosOERBQUcsQ0FBQzs7OzRCQUdMLEVBQUVJLEdBQUc7OztJQUc3QixDQUFDO1FBRUQsd0JBQXdCO1FBQ3hCLE1BQU1TLFlBQVksTUFBTWIsOERBQUcsQ0FBQzs7O3lCQUdQLEVBQUVJLEdBQUc7O0lBRTFCLENBQUM7UUFFRCxNQUFNVSxjQUFjO1lBQ2xCLEdBQUdULE9BQU8sQ0FBQyxFQUFFO1lBQ2JNO1lBQ0FDO1lBQ0FDO1FBQ0Y7UUFFQSxPQUFPTixTQUFTQyxJQUFJLENBQUNNO0lBQ3ZCLEVBQUUsT0FBT0wsT0FBTztRQUNkTSxRQUFRTixLQUFLLENBQUMsMkJBQTJCQTtRQUN6QyxPQUFPRixTQUFTQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUEwQixHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUMzRTtBQUNGO0FBRU8sZUFBZU0sSUFBSWQsT0FBTyxFQUFFLEVBQUVDLE1BQU0sRUFBRTtJQUMzQyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxF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QUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBb0IsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ3JFO1FBRUEsOENBQThDO1FBQzlDLE1BQU1WLDhEQUFHLENBQUMsZ0NBQWdDLEVBQUVJLEdBQUcsQ0FBQztRQUVoRCxPQUFPRyxTQUFTQyxJQUFJLENBQUM7WUFBRTJGLFNBQVM7UUFBK0I7SUFDakUsRUFBRSxPQUFPMUYsT0FBTztRQUNkTSxRQUFRTixLQUFLLENBQUMsMkJBQTJCQTtRQUN6QyxPQUFPRixTQUFTQyxJQUFJLENBQ2xCO1lBQUVDLE9BQU87UUFBMkIsR0FDcEM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbi1rYW4td2ViLy4vc3JjL2FwcC9hcGkvcHJvamVjdHMvW2lkXS9yb3V0ZS5qcz9kNTg4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzcWwgZnJvbSBcIkAvYXBwL2FwaS91dGlscy9zcWxcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdCwgeyBwYXJhbXMgfSkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGlkIH0gPSBwYXJhbXM7XHJcblxyXG4gICAgLy8gR2V0IHByb2plY3QgaW5mb3JtYXRpb24gd2l0aCBzdGFmZiBtZW1iZXIgbmFtZSBhbmQgY2xpZW50IGluZm9ybWF0aW9uXHJcbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgc3FsYFxyXG4gICAgICBTRUxFQ1QgXHJcbiAgICAgICAgcC4qLCBcclxuICAgICAgICBzLm5hbWUgYXMgYXNzaWduZWRfdGVhbV9tZW1iZXJfbmFtZSwgXHJcbiAgICAgICAgcy5jb2RlIGFzIGFzc2lnbmVkX3RlYW1fbWVtYmVyX2NvZGUsXHJcbiAgICAgICAgYy5jbGllbnRfbmFtZSxcclxuICAgICAgICBjLmNvbXBhbnlfYWRkcmVzcyxcclxuICAgICAgICBjLnBob25lX251bWJlcixcclxuICAgICAgICBjLmNvbnRhY3RfcGVyc29uLFxyXG4gICAgICAgIGMuZW1haWwsXHJcbiAgICAgICAgcC5kcml2ZV9mb2xkZXJfaWQsXHJcbiAgICAgICAgcC5kcml2ZV9mb2xkZXJfbGlua1xyXG4gICAgICBGUk9NIHByb2plY3RzIHBcclxuICAgICAgTEVGVCBKT0lOIHN0YWZmX21lbWJlcnMgcyBPTiBwLmFzc2lnbmVkX3RlYW1fbWVtYmVyID0gcy5jb2RlXHJcbiAgICAgIExFRlQgSk9JTiBjbGllbnRzIGMgT04gcC5jbGllbnRfaWQgPSBjLmlkXHJcbiAgICAgIFdIRVJFIHAuaWQgPSAke2lkfVxyXG4gICAgYDtcclxuXHJcbiAgICBpZiAocHJvamVjdC5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJQcm9qZWN0IG5vdCBmb3VuZFwiIH0sIHsgc3RhdHVzOiA0MDQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IHByb2plY3QgbWlsZXN0b25lc1xyXG4gICAgY29uc3QgbWlsZXN0b25lcyA9IGF3YWl0IHNxbGBcclxuICAgICAgU0VMRUNUICpcclxuICAgICAgRlJPTSBwcm9qZWN0X21pbGVzdG9uZXNcclxuICAgICAgV0hFUkUgcHJvamVjdF9pZCA9ICR7aWR9XHJcbiAgICAgIE9SREVSIEJZIGR1ZV9kYXRlIEFTQ1xyXG4gICAgYDtcclxuXHJcbiAgICAvLyBHZXQgcHJvamVjdCBhY3Rpdml0aWVzXHJcbiAgICBjb25zdCBhY3Rpdml0aWVzID0gYXdhaXQgc3FsYFxyXG4gICAgICBTRUxFQ1QgKlxyXG4gICAgICBGUk9NIHByb2plY3RfYWN0aXZpdGllcyBwYVxyXG4gICAgICBXSEVSRSBwYS5wcm9qZWN0X2lkID0gJHtpZH1cclxuICAgICAgT1JERVIgQlkgcGEuY3JlYXRlZF9hdCBERVNDXHJcbiAgICAgIExJTUlUIDIwXHJcbiAgICBgO1xyXG5cclxuICAgIC8vIEdldCBwcm9qZWN0IGRvY3VtZW50c1xyXG4gICAgY29uc3QgZG9jdW1lbnRzID0gYXdhaXQgc3FsYFxyXG4gICAgICBTRUxFQ1QgKlxyXG4gICAgICBGUk9NIHByb2plY3RfZG9jdW1lbnRzXHJcbiAgICAgIFdIRVJFIHByb2plY3RfaWQgPSAke2lkfVxyXG4gICAgICBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0NcclxuICAgIGA7XHJcblxyXG4gICAgY29uc3QgcHJvamVjdERhdGEgPSB7XHJcbiAgICAgIC4uLnByb2plY3RbMF0sXHJcbiAgICAgIG1pbGVzdG9uZXMsXHJcbiAgICAgIGFjdGl2aXRpZXMsXHJcbiAgICAgIGRvY3VtZW50cyxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIFJlc3BvbnNlLmpzb24ocHJvamVjdERhdGEpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgcHJvamVjdDpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJGYWlsZWQgdG8gZmV0Y2ggcHJvamVjdFwiIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKHJlcXVlc3QsIHsgcGFyYW1zIH0pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBpZCB9ID0gcGFyYW1zO1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG5cclxuICAgIGNvbnN0IHtcclxuICAgICAgYWRfbnVtYmVyLFxyXG4gICAgICBwcm9qZWN0X25hbWUsXHJcbiAgICAgIGNsaWVudF9uYW1lLFxyXG4gICAgICBpbnF1aXJ5X2RhdGUsXHJcbiAgICAgIHN0YXR1cyxcclxuICAgICAgY29tcGxldGlvbl9wZXJjZW50YWdlLFxyXG4gICAgICBhc3NpZ25lZF90ZWFtX21lbWJlcixcclxuICAgICAgZGVsaXZlcnlfZGF0ZSxcclxuICAgICAgaW5zdGFsbGF0aW9uX2RhdGUsXHJcbiAgICAgIGluc3RhbGxhdGlvbl9jb250cmFjdG9yLFxyXG4gICAgICByZW1hcmtzLFxyXG4gICAgICBwcm9kdWN0X251bWJlciwgLy8g6KO95ZOB55Wq5Y+344KS6L+95YqgXHJcbiAgICAgIGFkZHJlc3MsXHJcbiAgICAgIHBob25lX251bWJlcixcclxuICAgICAgZXN0aW1hdGVkX2Ftb3VudCxcclxuICAgICAgY29tcGFueV9hZGRyZXNzLFxyXG4gICAgICBjb250YWN0X3BlcnNvbixcclxuICAgICAgZW1haWwsXHJcbiAgICB9ID0gYm9keTtcclxuXHJcbiAgICAvLyBDaGVjayBpZiBwcm9qZWN0IGV4aXN0cyBhbmQgZ2V0IGN1cnJlbnQgcHJvamVjdCBpbmZvIHdpdGggY2xpZW50IGRhdGFcclxuICAgIGNvbnN0IGV4aXN0aW5nUHJvamVjdCA9IGF3YWl0IHNxbGBcclxuICAgICAgU0VMRUNUIFxyXG4gICAgICAgIHAuKixcclxuICAgICAgICBjLmNsaWVudF9uYW1lIGFzIGN1cnJlbnRfY2xpZW50X25hbWUsXHJcbiAgICAgICAgYy5jb21wYW55X2FkZHJlc3MgYXMgY3VycmVudF9jb21wYW55X2FkZHJlc3MsXHJcbiAgICAgICAgYy5waG9uZV9udW1iZXIgYXMgY3VycmVudF9waG9uZV9udW1iZXIsXHJcbiAgICAgICAgYy5jb250YWN0X3BlcnNvbiBhcyBjdXJyZW50X2NvbnRhY3RfcGVyc29uLFxyXG4gICAgICAgIGMuZW1haWwgYXMgY3VycmVudF9lbWFpbFxyXG4gICAgICBGUk9NIHByb2plY3RzIHBcclxuICAgICAgTEVGVCBKT0lOIGNsaWVudHMgYyBPTiBwLmNsaWVudF9pZCA9IGMuaWRcclxuICAgICAgV0hFUkUgcC5pZCA9ICR7aWR9XHJcbiAgICBgO1xyXG5cclxuICAgIGlmIChleGlzdGluZ1Byb2plY3QubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiUHJvamVjdCBub3QgZm91bmRcIiB9LCB7IHN0YXR1czogNDA0IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG9sZFByb2plY3QgPSBleGlzdGluZ1Byb2plY3RbMF07XHJcbiAgICBsZXQgY2xpZW50SWQgPSBvbGRQcm9qZWN0LmNsaWVudF9pZDtcclxuXHJcbiAgICAvLyBIYW5kbGUgY2xpZW50IGluZm9ybWF0aW9uIHVwZGF0ZXNcclxuICAgIGNvbnN0IGNsaWVudEZpZWxkc0NoYW5nZWQgPVxyXG4gICAgICAoY2xpZW50X25hbWUgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgIGNsaWVudF9uYW1lICE9PSBvbGRQcm9qZWN0LmN1cnJlbnRfY2xpZW50X25hbWUpIHx8XHJcbiAgICAgIChjb21wYW55X2FkZHJlc3MgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgIGNvbXBhbnlfYWRkcmVzcyAhPT0gb2xkUHJvamVjdC5jdXJyZW50X2NvbXBhbnlfYWRkcmVzcykgfHxcclxuICAgICAgKHBob25lX251bWJlciAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgcGhvbmVfbnVtYmVyICE9PSBvbGRQcm9qZWN0LmN1cnJlbnRfcGhvbmVfbnVtYmVyKSB8fFxyXG4gICAgICAoY29udGFjdF9wZXJzb24gIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgIGNvbnRhY3RfcGVyc29uICE9PSBvbGRQcm9qZWN0LmN1cnJlbnRfY29udGFjdF9wZXJzb24pIHx8XHJcbiAgICAgIChlbWFpbCAhPT0gdW5kZWZpbmVkICYmIGVtYWlsICE9PSBvbGRQcm9qZWN0LmN1cnJlbnRfZW1haWwpO1xyXG5cclxuICAgIGlmIChjbGllbnRGaWVsZHNDaGFuZ2VkKSB7XHJcbiAgICAgIGlmIChjbGllbnRJZCkge1xyXG4gICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBjbGllbnRcclxuICAgICAgICBjb25zdCBjbGllbnRVcGRhdGVzID0gW107XHJcbiAgICAgICAgY29uc3QgY2xpZW50VmFsdWVzID0gW107XHJcbiAgICAgICAgbGV0IGNsaWVudFBhcmFtQ291bnQgPSAwO1xyXG5cclxuICAgICAgICBpZiAoY2xpZW50X25hbWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgY2xpZW50UGFyYW1Db3VudCsrO1xyXG4gICAgICAgICAgY2xpZW50VXBkYXRlcy5wdXNoKGBjbGllbnRfbmFtZSA9ICQke2NsaWVudFBhcmFtQ291bnR9YCk7XHJcbiAgICAgICAgICBjbGllbnRWYWx1ZXMucHVzaChjbGllbnRfbmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb21wYW55X2FkZHJlc3MgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgY2xpZW50UGFyYW1Db3VudCsrO1xyXG4gICAgICAgICAgY2xpZW50VXBkYXRlcy5wdXNoKGBjb21wYW55X2FkZHJlc3MgPSAkJHtjbGllbnRQYXJhbUNvdW50fWApO1xyXG4gICAgICAgICAgY2xpZW50VmFsdWVzLnB1c2goY29tcGFueV9hZGRyZXNzIHx8IG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocGhvbmVfbnVtYmVyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgIGNsaWVudFBhcmFtQ291bnQrKztcclxuICAgICAgICAgIGNsaWVudFVwZGF0ZXMucHVzaChgcGhvbmVfbnVtYmVyID0gJCR7Y2xpZW50UGFyYW1Db3VudH1gKTtcclxuICAgICAgICAgIGNsaWVudFZhbHVlcy5wdXNoKHBob25lX251bWJlciB8fCBudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbnRhY3RfcGVyc29uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgIGNsaWVudFBhcmFtQ291bnQrKztcclxuICAgICAgICAgIGNsaWVudFVwZGF0ZXMucHVzaChgY29udGFjdF9wZXJzb24gPSAkJHtjbGllbnRQYXJhbUNvdW50fWApO1xyXG4gICAgICAgICAgY2xpZW50VmFsdWVzLnB1c2goY29udGFjdF9wZXJzb24gfHwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbWFpbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBjbGllbnRQYXJhbUNvdW50Kys7XHJcbiAgICAgICAgICBjbGllbnRVcGRhdGVzLnB1c2goYGVtYWlsID0gJCR7Y2xpZW50UGFyYW1Db3VudH1gKTtcclxuICAgICAgICAgIGNsaWVudFZhbHVlcy5wdXNoKGVtYWlsIHx8IG51bGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNsaWVudFVwZGF0ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgLy8gQWRkIHVwZGF0ZWRfYXRcclxuICAgICAgICAgIGNsaWVudFBhcmFtQ291bnQrKztcclxuICAgICAgICAgIGNsaWVudFVwZGF0ZXMucHVzaChgdXBkYXRlZF9hdCA9ICQke2NsaWVudFBhcmFtQ291bnR9YCk7XHJcbiAgICAgICAgICBjbGllbnRWYWx1ZXMucHVzaChuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkpO1xyXG5cclxuICAgICAgICAgIC8vIEFkZCBjbGllbnRfaWQgZm9yIFdIRVJFIGNsYXVzZVxyXG4gICAgICAgICAgY2xpZW50UGFyYW1Db3VudCsrO1xyXG4gICAgICAgICAgY2xpZW50VmFsdWVzLnB1c2goY2xpZW50SWQpO1xyXG5cclxuICAgICAgICAgIGNvbnN0IGNsaWVudFVwZGF0ZVF1ZXJ5ID0gYFxyXG4gICAgICAgICAgICBVUERBVEUgY2xpZW50cyBcclxuICAgICAgICAgICAgU0VUICR7Y2xpZW50VXBkYXRlcy5qb2luKFwiLCBcIil9XHJcbiAgICAgICAgICAgIFdIRVJFIGlkID0gJCR7Y2xpZW50UGFyYW1Db3VudH1cclxuICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgICAgYXdhaXQgc3FsKGNsaWVudFVwZGF0ZVF1ZXJ5LCBjbGllbnRWYWx1ZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBDcmVhdGUgbmV3IGNsaWVudCBpZiBub3QgZXhpc3RzXHJcbiAgICAgICAgY29uc3QgY2xpZW50UmVzdWx0ID0gYXdhaXQgc3FsYFxyXG4gICAgICAgICAgSU5TRVJUIElOVE8gY2xpZW50cyAoXHJcbiAgICAgICAgICAgIGNsaWVudF9uYW1lLFxyXG4gICAgICAgICAgICBjb21wYW55X2FkZHJlc3MsXHJcbiAgICAgICAgICAgIHBob25lX251bWJlcixcclxuICAgICAgICAgICAgY29udGFjdF9wZXJzb24sXHJcbiAgICAgICAgICAgIGVtYWlsXHJcbiAgICAgICAgICApIFZBTFVFUyAoXHJcbiAgICAgICAgICAgICR7Y2xpZW50X25hbWUgfHwgXCLmnKroqK3lrppcIn0sXHJcbiAgICAgICAgICAgICR7Y29tcGFueV9hZGRyZXNzIHx8IG51bGx9LFxyXG4gICAgICAgICAgICAke3Bob25lX251bWJlciB8fCBudWxsfSxcclxuICAgICAgICAgICAgJHtjb250YWN0X3BlcnNvbiB8fCBudWxsfSxcclxuICAgICAgICAgICAgJHtlbWFpbCB8fCBudWxsfVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgUkVUVVJOSU5HIGlkXHJcbiAgICAgICAgYDtcclxuICAgICAgICBjbGllbnRJZCA9IGNsaWVudFJlc3VsdFswXS5pZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEhhbmRsZSBwcm9qZWN0IGluZm9ybWF0aW9uIHVwZGF0ZXNcclxuICAgIGNvbnN0IHVwZGF0ZXMgPSBbXTtcclxuICAgIGNvbnN0IHZhbHVlcyA9IFtdO1xyXG4gICAgbGV0IHBhcmFtQ291bnQgPSAwO1xyXG5cclxuICAgIGlmIChhZF9udW1iZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBwYXJhbUNvdW50Kys7XHJcbiAgICAgIHVwZGF0ZXMucHVzaChgYWRfbnVtYmVyID0gJCR7cGFyYW1Db3VudH1gKTtcclxuICAgICAgdmFsdWVzLnB1c2gocGFyc2VJbnQoYWRfbnVtYmVyKSB8fCBudWxsKTtcclxuICAgIH1cclxuICAgIGlmIChwcm9qZWN0X25hbWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBwYXJhbUNvdW50Kys7XHJcbiAgICAgIHVwZGF0ZXMucHVzaChgcHJvamVjdF9uYW1lID0gJCR7cGFyYW1Db3VudH1gKTtcclxuICAgICAgdmFsdWVzLnB1c2gocHJvamVjdF9uYW1lKTtcclxuICAgIH1cclxuICAgIGlmIChpbnF1aXJ5X2RhdGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBwYXJhbUNvdW50Kys7XHJcbiAgICAgIHVwZGF0ZXMucHVzaChgaW5xdWlyeV9kYXRlID0gJCR7cGFyYW1Db3VudH1gKTtcclxuICAgICAgdmFsdWVzLnB1c2goaW5xdWlyeV9kYXRlID8gbmV3IERhdGUoaW5xdWlyeV9kYXRlKSA6IG51bGwpO1xyXG4gICAgfVxyXG4gICAgaWYgKHN0YXR1cyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHBhcmFtQ291bnQrKztcclxuICAgICAgdXBkYXRlcy5wdXNoKGBzdGF0dXMgPSAkJHtwYXJhbUNvdW50fWApO1xyXG4gICAgICB2YWx1ZXMucHVzaChzdGF0dXMpO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbXBsZXRpb25fcGVyY2VudGFnZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHBhcmFtQ291bnQrKztcclxuICAgICAgdXBkYXRlcy5wdXNoKGBjb21wbGV0aW9uX3BlcmNlbnRhZ2UgPSAkJHtwYXJhbUNvdW50fWApO1xyXG4gICAgICB2YWx1ZXMucHVzaChjb21wbGV0aW9uX3BlcmNlbnRhZ2UpO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlbGl2ZXJ5X2RhdGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBwYXJhbUNvdW50Kys7XHJcbiAgICAgIHVwZGF0ZXMucHVzaChgZGVsaXZlcnlfZGF0ZSA9ICQke3BhcmFtQ291bnR9YCk7XHJcbiAgICAgIHZhbHVlcy5wdXNoKGRlbGl2ZXJ5X2RhdGUgPyBuZXcgRGF0ZShkZWxpdmVyeV9kYXRlKSA6IG51bGwpO1xyXG4gICAgfVxyXG4gICAgaWYgKGluc3RhbGxhdGlvbl9kYXRlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgcGFyYW1Db3VudCsrO1xyXG4gICAgICB1cGRhdGVzLnB1c2goYGluc3RhbGxhdGlvbl9kYXRlID0gJCR7cGFyYW1Db3VudH1gKTtcclxuICAgICAgdmFsdWVzLnB1c2goaW5zdGFsbGF0aW9uX2RhdGUgPyBuZXcgRGF0ZShpbnN0YWxsYXRpb25fZGF0ZSkgOiBudWxsKTtcclxuICAgIH1cclxuICAgIGlmIChpbnN0YWxsYXRpb25fY29udHJhY3RvciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHBhcmFtQ291bnQrKztcclxuICAgICAgdXBkYXRlcy5wdXNoKGBpbnN0YWxsYXRpb25fY29udHJhY3RvciA9ICQke3BhcmFtQ291bnR9YCk7XHJcbiAgICAgIHZhbHVlcy5wdXNoKGluc3RhbGxhdGlvbl9jb250cmFjdG9yKTtcclxuICAgIH1cclxuICAgIGlmIChyZW1hcmtzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgcGFyYW1Db3VudCsrO1xyXG4gICAgICB1cGRhdGVzLnB1c2goYHJlbWFya3MgPSAkJHtwYXJhbUNvdW50fWApO1xyXG4gICAgICB2YWx1ZXMucHVzaChyZW1hcmtzKTtcclxuICAgIH1cclxuICAgIGlmIChwcm9kdWN0X251bWJlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHBhcmFtQ291bnQrKztcclxuICAgICAgdXBkYXRlcy5wdXNoKGBwcm9kdWN0X251bWJlciA9ICQke3BhcmFtQ291bnR9YCk7XHJcbiAgICAgIHZhbHVlcy5wdXNoKHByb2R1Y3RfbnVtYmVyKTtcclxuICAgIH1cclxuICAgIGlmIChhZGRyZXNzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgcGFyYW1Db3VudCsrO1xyXG4gICAgICB1cGRhdGVzLnB1c2goYGFkZHJlc3MgPSAkJHtwYXJhbUNvdW50fWApO1xyXG4gICAgICB2YWx1ZXMucHVzaChhZGRyZXNzKTtcclxuICAgIH1cclxuICAgIGlmIChlc3RpbWF0ZWRfYW1vdW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgcGFyYW1Db3VudCsrO1xyXG4gICAgICB1cGRhdGVzLnB1c2goYGVzdGltYXRlZF9hbW91bnQgPSAkJHtwYXJhbUNvdW50fWApO1xyXG4gICAgICB2YWx1ZXMucHVzaChlc3RpbWF0ZWRfYW1vdW50ID8gcGFyc2VGbG9hdChlc3RpbWF0ZWRfYW1vdW50KSA6IG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBjbGllbnRfaWQgaWYgY2hhbmdlZFxyXG4gICAgaWYgKGNsaWVudEZpZWxkc0NoYW5nZWQgJiYgY2xpZW50SWQgIT09IG9sZFByb2plY3QuY2xpZW50X2lkKSB7XHJcbiAgICAgIHBhcmFtQ291bnQrKztcclxuICAgICAgdXBkYXRlcy5wdXNoKGBjbGllbnRfaWQgPSAkJHtwYXJhbUNvdW50fWApO1xyXG4gICAgICB2YWx1ZXMucHVzaChjbGllbnRJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHVwZGF0ZWRQcm9qZWN0ID0gb2xkUHJvamVjdDtcclxuXHJcbiAgICBpZiAodXBkYXRlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIC8vIEFkZCB1cGRhdGVkX2F0XHJcbiAgICAgIHBhcmFtQ291bnQrKztcclxuICAgICAgdXBkYXRlcy5wdXNoKGB1cGRhdGVkX2F0ID0gJCR7cGFyYW1Db3VudH1gKTtcclxuICAgICAgdmFsdWVzLnB1c2gobmV3IERhdGUoKS50b0lTT1N0cmluZygpKTtcclxuXHJcbiAgICAgIC8vIEFkZCBpZCBmb3IgV0hFUkUgY2xhdXNlXHJcbiAgICAgIHBhcmFtQ291bnQrKztcclxuICAgICAgdmFsdWVzLnB1c2goaWQpO1xyXG5cclxuICAgICAgY29uc3QgdXBkYXRlUXVlcnkgPSBgXHJcbiAgICAgICAgVVBEQVRFIHByb2plY3RzIFxyXG4gICAgICAgIFNFVCAke3VwZGF0ZXMuam9pbihcIiwgXCIpfVxyXG4gICAgICAgIFdIRVJFIGlkID0gJCR7cGFyYW1Db3VudH1cclxuICAgICAgICBSRVRVUk5JTkcgKlxyXG4gICAgICBgO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3FsKHVwZGF0ZVF1ZXJ5LCB2YWx1ZXMpO1xyXG4gICAgICB1cGRhdGVkUHJvamVjdCA9IHJlc3VsdFswXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMb2cgdmFyaW91cyBhY3Rpdml0eSBjaGFuZ2VzXHJcbiAgICAvLyBTdGF0dXMgY2hhbmdlIGxvZ1xyXG4gICAgaWYgKHN0YXR1cyAmJiBzdGF0dXMgIT09IG9sZFByb2plY3Quc3RhdHVzKSB7XHJcbiAgICAgIGF3YWl0IHNxbGBcclxuICAgICAgICBJTlNFUlQgSU5UTyBwcm9qZWN0X2FjdGl2aXRpZXMgKHByb2plY3RfaWQsIGFjdGl2aXR5X3R5cGUsIGRlc2NyaXB0aW9uKVxyXG4gICAgICAgIFZBTFVFUyAoJHtpZH0sICdzdGF0dXNfdXBkYXRlJywgJHtg44K544OG44O844K/44K544GM44CMJHtvbGRQcm9qZWN0LnN0YXR1c33jgI3jgYvjgonjgIwke3N0YXR1c33jgI3jgavlpInmm7TjgZXjgozjgb7jgZfjgZ9gfSlcclxuICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDbGllbnQgbmFtZSBjaGFuZ2UgbG9nXHJcbiAgICBpZiAoXHJcbiAgICAgIGNsaWVudF9uYW1lICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgY2xpZW50X25hbWUgIT09IG9sZFByb2plY3QuY3VycmVudF9jbGllbnRfbmFtZVxyXG4gICAgKSB7XHJcbiAgICAgIGF3YWl0IHNxbGBcclxuICAgICAgICBJTlNFUlQgSU5UTyBwcm9qZWN0X2FjdGl2aXRpZXMgKHByb2plY3RfaWQsIGFjdGl2aXR5X3R5cGUsIGRlc2NyaXB0aW9uKVxyXG4gICAgICAgIFZBTFVFUyAoJHtpZH0sICdjbGllbnRfdXBkYXRlJywgJHtg5Y+W5byV5YWI5ZCN44GM44CMJHtvbGRQcm9qZWN0LmN1cnJlbnRfY2xpZW50X25hbWV944CN44GL44KJ44CMJHtjbGllbnRfbmFtZX3jgI3jgavlpInmm7TjgZXjgozjgb7jgZfjgZ9gfSlcclxuICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb250YWN0IHBlcnNvbiBjaGFuZ2UgbG9nXHJcbiAgICBpZiAoXHJcbiAgICAgIGNvbnRhY3RfcGVyc29uICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgY29udGFjdF9wZXJzb24gIT09IG9sZFByb2plY3QuY3VycmVudF9jb250YWN0X3BlcnNvblxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IG9sZENvbnRhY3QgPSBvbGRQcm9qZWN0LmN1cnJlbnRfY29udGFjdF9wZXJzb24gfHwgXCLmnKroqK3lrppcIjtcclxuICAgICAgY29uc3QgbmV3Q29udGFjdCA9IGNvbnRhY3RfcGVyc29uIHx8IFwi5pyq6Kit5a6aXCI7XHJcbiAgICAgIGF3YWl0IHNxbGBcclxuICAgICAgICBJTlNFUlQgSU5UTyBwcm9qZWN0X2FjdGl2aXRpZXMgKHByb2plY3RfaWQsIGFjdGl2aXR5X3R5cGUsIGRlc2NyaXB0aW9uKVxyXG4gICAgICAgIFZBTFVFUyAoJHtpZH0sICdjb250YWN0X3BlcnNvbl91cGRhdGUnLCAke2Dmi4XlvZPogIXlkI3jgYzjgIwke29sZENvbnRhY3R944CN44GL44KJ44CMJHtuZXdDb250YWN0feOAjeOBq+WkieabtOOBleOCjOOBvuOBl+OBn2B9KVxyXG4gICAgICBgO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEVtYWlsIGNoYW5nZSBsb2dcclxuICAgIGlmIChlbWFpbCAhPT0gdW5kZWZpbmVkICYmIGVtYWlsICE9PSBvbGRQcm9qZWN0LmN1cnJlbnRfZW1haWwpIHtcclxuICAgICAgY29uc3Qgb2xkRW1haWwgPSBvbGRQcm9qZWN0LmN1cnJlbnRfZW1haWwgfHwgXCLmnKroqK3lrppcIjtcclxuICAgICAgY29uc3QgbmV3RW1haWwgPSBlbWFpbCB8fCBcIuacquioreWumlwiO1xyXG4gICAgICBhd2FpdCBzcWxgXHJcbiAgICAgICAgSU5TRVJUIElOVE8gcHJvamVjdF9hY3Rpdml0aWVzIChwcm9qZWN0X2lkLCBhY3Rpdml0eV90eXBlLCBkZXNjcmlwdGlvbilcclxuICAgICAgICBWQUxVRVMgKCR7aWR9LCAnZW1haWxfdXBkYXRlJywgJHtg44Oh44O844Or44Ki44OJ44Os44K544GM44CMJHtvbGRFbWFpbH3jgI3jgYvjgonjgIwke25ld0VtYWlsfeOAjeOBq+WkieabtOOBleOCjOOBvuOBl+OBn2B9KVxyXG4gICAgICBgO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvbXBhbnkgYWRkcmVzcyBjaGFuZ2UgbG9nXHJcbiAgICBpZiAoXHJcbiAgICAgIGNvbXBhbnlfYWRkcmVzcyAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgIGNvbXBhbnlfYWRkcmVzcyAhPT0gb2xkUHJvamVjdC5jdXJyZW50X2NvbXBhbnlfYWRkcmVzc1xyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IG9sZENvbXBhbnlBZGRyZXNzID0gb2xkUHJvamVjdC5jdXJyZW50X2NvbXBhbnlfYWRkcmVzcyB8fCBcIuacquioreWumlwiO1xyXG4gICAgICBjb25zdCBuZXdDb21wYW55QWRkcmVzcyA9IGNvbXBhbnlfYWRkcmVzcyB8fCBcIuacquioreWumlwiO1xyXG4gICAgICBhd2FpdCBzcWxgXHJcbiAgICAgICAgSU5TRVJUIElOVE8gcHJvamVjdF9hY3Rpdml0aWVzIChwcm9qZWN0X2lkLCBhY3Rpdml0eV90eXBlLCBkZXNjcmlwdGlvbilcclxuICAgICAgICBWQUxVRVMgKCR7aWR9LCAnY29tcGFueV9hZGRyZXNzX3VwZGF0ZScsICR7YOS8muekvuS9j+aJgOOBjOOAjCR7b2xkQ29tcGFueUFkZHJlc3N944CN44GL44KJ44CMJHtuZXdDb21wYW55QWRkcmVzc33jgI3jgavlpInmm7TjgZXjgozjgb7jgZfjgZ9gfSlcclxuICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQaG9uZSBudW1iZXIgY2hhbmdlIGxvZ1xyXG4gICAgaWYgKFxyXG4gICAgICBwaG9uZV9udW1iZXIgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICBwaG9uZV9udW1iZXIgIT09IG9sZFByb2plY3QuY3VycmVudF9waG9uZV9udW1iZXJcclxuICAgICkge1xyXG4gICAgICBjb25zdCBvbGRQaG9uZSA9IG9sZFByb2plY3QuY3VycmVudF9waG9uZV9udW1iZXIgfHwgXCLmnKroqK3lrppcIjtcclxuICAgICAgY29uc3QgbmV3UGhvbmUgPSBwaG9uZV9udW1iZXIgfHwgXCLmnKroqK3lrppcIjtcclxuICAgICAgYXdhaXQgc3FsYFxyXG4gICAgICAgIElOU0VSVCBJTlRPIHByb2plY3RfYWN0aXZpdGllcyAocHJvamVjdF9pZCwgYWN0aXZpdHlfdHlwZSwgZGVzY3JpcHRpb24pXHJcbiAgICAgICAgVkFMVUVTICgke2lkfSwgJ3Bob25lX3VwZGF0ZScsICR7YOmbu+ipseeVquWPt+OBjOOAjCR7b2xkUGhvbmV944CN44GL44KJ44CMJHtuZXdQaG9uZX3jgI3jgavlpInmm7TjgZXjgozjgb7jgZfjgZ9gfSlcclxuICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGRyZXNzIGNoYW5nZSBsb2cgKGluc3RhbGxhdGlvbiBhZGRyZXNzKVxyXG4gICAgaWYgKGFkZHJlc3MgIT09IHVuZGVmaW5lZCAmJiBhZGRyZXNzICE9PSBvbGRQcm9qZWN0LmFkZHJlc3MpIHtcclxuICAgICAgY29uc3Qgb2xkQWRkcmVzcyA9IG9sZFByb2plY3QuYWRkcmVzcyB8fCBcIuacquioreWumlwiO1xyXG4gICAgICBjb25zdCBuZXdBZGRyZXNzID0gYWRkcmVzcyB8fCBcIuacquioreWumlwiO1xyXG4gICAgICBhd2FpdCBzcWxgXHJcbiAgICAgICAgSU5TRVJUIElOVE8gcHJvamVjdF9hY3Rpdml0aWVzIChwcm9qZWN0X2lkLCBhY3Rpdml0eV90eXBlLCBkZXNjcmlwdGlvbilcclxuICAgICAgICBWQUxVRVMgKCR7aWR9LCAnYWRkcmVzc191cGRhdGUnLCAke2DoqK3nva7lhYjkvY/miYDjgYzjgIwke29sZEFkZHJlc3N944CN44GL44KJ44CMJHtuZXdBZGRyZXNzfeOAjeOBq+WkieabtOOBleOCjOOBvuOBl+OBn2B9KVxyXG4gICAgICBgO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElucXVpcnkgZGF0ZSBjaGFuZ2UgbG9nXHJcbiAgICBpZiAoaW5xdWlyeV9kYXRlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgY29uc3Qgb2xkRGF0ZSA9IG9sZFByb2plY3QuaW5xdWlyeV9kYXRlXHJcbiAgICAgICAgPyBuZXcgRGF0ZShvbGRQcm9qZWN0LmlucXVpcnlfZGF0ZSkudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF1cclxuICAgICAgICA6IG51bGw7XHJcbiAgICAgIGNvbnN0IG5ld0RhdGUgPSBpbnF1aXJ5X2RhdGUgfHwgbnVsbDtcclxuXHJcbiAgICAgIGlmIChvbGREYXRlICE9PSBuZXdEYXRlKSB7XHJcbiAgICAgICAgY29uc3Qgb2xkRGF0ZVN0ciA9IG9sZERhdGVcclxuICAgICAgICAgID8gbmV3IERhdGUob2xkRGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKFwiamEtSlBcIilcclxuICAgICAgICAgIDogXCLmnKroqK3lrppcIjtcclxuICAgICAgICBjb25zdCBuZXdEYXRlU3RyID0gbmV3RGF0ZVxyXG4gICAgICAgICAgPyBuZXcgRGF0ZShuZXdEYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoXCJqYS1KUFwiKVxyXG4gICAgICAgICAgOiBcIuacquioreWumlwiO1xyXG5cclxuICAgICAgICBhd2FpdCBzcWxgXHJcbiAgICAgICAgICBJTlNFUlQgSU5UTyBwcm9qZWN0X2FjdGl2aXRpZXMgKHByb2plY3RfaWQsIGFjdGl2aXR5X3R5cGUsIGRlc2NyaXB0aW9uKVxyXG4gICAgICAgICAgVkFMVUVTICgke2lkfSwgJ2lucXVpcnlfZGF0ZV91cGRhdGUnLCAke2DllY/jgYTlkIjjgo/jgZvml6XjgYzjgIwke29sZERhdGVTdHJ944CN44GL44KJ44CMJHtuZXdEYXRlU3RyfeOAjeOBq+WkieabtOOBleOCjOOBvuOBl+OBn2B9KVxyXG4gICAgICAgIGA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBEZWxpdmVyeSBkYXRlIGNoYW5nZSBsb2dcclxuICAgIGlmIChkZWxpdmVyeV9kYXRlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgY29uc3Qgb2xkRGF0ZSA9IG9sZFByb2plY3QuZGVsaXZlcnlfZGF0ZVxyXG4gICAgICAgID8gbmV3IERhdGUob2xkUHJvamVjdC5kZWxpdmVyeV9kYXRlKS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXVxyXG4gICAgICAgIDogbnVsbDtcclxuICAgICAgY29uc3QgbmV3RGF0ZSA9IGRlbGl2ZXJ5X2RhdGUgfHwgbnVsbDtcclxuXHJcbiAgICAgIGlmIChvbGREYXRlICE9PSBuZXdEYXRlKSB7XHJcbiAgICAgICAgY29uc3Qgb2xkRGF0ZVN0ciA9IG9sZERhdGVcclxuICAgICAgICAgID8gbmV3IERhdGUob2xkRGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKFwiamEtSlBcIilcclxuICAgICAgICAgIDogXCLmnKroqK3lrppcIjtcclxuICAgICAgICBjb25zdCBuZXdEYXRlU3RyID0gbmV3RGF0ZVxyXG4gICAgICAgICAgPyBuZXcgRGF0ZShuZXdEYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoXCJqYS1KUFwiKVxyXG4gICAgICAgICAgOiBcIuacquioreWumlwiO1xyXG5cclxuICAgICAgICBhd2FpdCBzcWxgXHJcbiAgICAgICAgICBJTlNFUlQgSU5UTyBwcm9qZWN0X2FjdGl2aXRpZXMgKHByb2plY3RfaWQsIGFjdGl2aXR5X3R5cGUsIGRlc2NyaXB0aW9uKVxyXG4gICAgICAgICAgVkFMVUVTICgke2lkfSwgJ2RlbGl2ZXJ5X2RhdGVfdXBkYXRlJywgJHtg57SN5pyf44GM44CMJHtvbGREYXRlU3RyfeOAjeOBi+OCieOAjCR7bmV3RGF0ZVN0cn3jgI3jgavlpInmm7TjgZXjgozjgb7jgZfjgZ9gfSlcclxuICAgICAgICBgO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5zdGFsbGF0aW9uIGRhdGUgY2hhbmdlIGxvZ1xyXG4gICAgaWYgKGluc3RhbGxhdGlvbl9kYXRlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgY29uc3Qgb2xkRGF0ZSA9IG9sZFByb2plY3QuaW5zdGFsbGF0aW9uX2RhdGVcclxuICAgICAgICA/IG5ldyBEYXRlKG9sZFByb2plY3QuaW5zdGFsbGF0aW9uX2RhdGUpLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdXHJcbiAgICAgICAgOiBudWxsO1xyXG4gICAgICBjb25zdCBuZXdEYXRlID0gaW5zdGFsbGF0aW9uX2RhdGUgfHwgbnVsbDtcclxuXHJcbiAgICAgIGlmIChvbGREYXRlICE9PSBuZXdEYXRlKSB7XHJcbiAgICAgICAgY29uc3Qgb2xkRGF0ZVN0ciA9IG9sZERhdGVcclxuICAgICAgICAgID8gbmV3IERhdGUob2xkRGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKFwiamEtSlBcIilcclxuICAgICAgICAgIDogXCLmnKroqK3lrppcIjtcclxuICAgICAgICBjb25zdCBuZXdEYXRlU3RyID0gbmV3RGF0ZVxyXG4gICAgICAgICAgPyBuZXcgRGF0ZShuZXdEYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoXCJqYS1KUFwiKVxyXG4gICAgICAgICAgOiBcIuacquioreWumlwiO1xyXG5cclxuICAgICAgICBhd2FpdCBzcWxgXHJcbiAgICAgICAgICBJTlNFUlQgSU5UTyBwcm9qZWN0X2FjdGl2aXRpZXMgKHByb2plY3RfaWQsIGFjdGl2aXR5X3R5cGUsIGRlc2NyaXB0aW9uKVxyXG4gICAgICAgICAgVkFMVUVTICgke2lkfSwgJ2luc3RhbGxhdGlvbl9kYXRlX3VwZGF0ZScsICR7YOioree9ruaXpeOBjOOAjCR7b2xkRGF0ZVN0cn3jgI3jgYvjgonjgIwke25ld0RhdGVTdHJ944CN44Gr5aSJ5pu044GV44KM44G+44GX44GfYH0pXHJcbiAgICAgICAgYDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEluc3RhbGxhdGlvbiBjb250cmFjdG9yIGNoYW5nZSBsb2dcclxuICAgIGlmIChcclxuICAgICAgaW5zdGFsbGF0aW9uX2NvbnRyYWN0b3IgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICBpbnN0YWxsYXRpb25fY29udHJhY3RvciAhPT0gb2xkUHJvamVjdC5pbnN0YWxsYXRpb25fY29udHJhY3RvclxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IG9sZENvbnRyYWN0b3IgPSBvbGRQcm9qZWN0Lmluc3RhbGxhdGlvbl9jb250cmFjdG9yIHx8IFwi5pyq6Kit5a6aXCI7XHJcbiAgICAgIGNvbnN0IG5ld0NvbnRyYWN0b3IgPSBpbnN0YWxsYXRpb25fY29udHJhY3RvciB8fCBcIuacquioreWumlwiO1xyXG5cclxuICAgICAgYXdhaXQgc3FsYFxyXG4gICAgICAgIElOU0VSVCBJTlRPIHByb2plY3RfYWN0aXZpdGllcyAocHJvamVjdF9pZCwgYWN0aXZpdHlfdHlwZSwgZGVzY3JpcHRpb24pXHJcbiAgICAgICAgVkFMVUVTICgke2lkfSwgJ2NvbnRyYWN0b3JfdXBkYXRlJywgJHtg6Kit572u5qWt6ICF44GM44CMJHtvbGRDb250cmFjdG9yfeOAjeOBi+OCieOAjCR7bmV3Q29udHJhY3Rvcn3jgI3jgavlpInmm7TjgZXjgozjgb7jgZfjgZ9gfSlcclxuICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQcm9qZWN0IG5hbWUgY2hhbmdlIGxvZ1xyXG4gICAgaWYgKFxyXG4gICAgICBwcm9qZWN0X25hbWUgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICBwcm9qZWN0X25hbWUgIT09IG9sZFByb2plY3QucHJvamVjdF9uYW1lXHJcbiAgICApIHtcclxuICAgICAgYXdhaXQgc3FsYFxyXG4gICAgICAgIElOU0VSVCBJTlRPIHByb2plY3RfYWN0aXZpdGllcyAocHJvamVjdF9pZCwgYWN0aXZpdHlfdHlwZSwgZGVzY3JpcHRpb24pXHJcbiAgICAgICAgVkFMVUVTICgke2lkfSwgJ25hbWVfdXBkYXRlJywgJHtg44OX44Ot44K444Kn44Kv44OI5ZCN44GM44CMJHtvbGRQcm9qZWN0LnByb2plY3RfbmFtZX3jgI3jgYvjgonjgIwke3Byb2plY3RfbmFtZX3jgI3jgavlpInmm7TjgZXjgozjgb7jgZfjgZ9gfSlcclxuICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBc3NpZ25lZCB0ZWFtIG1lbWJlciBjaGFuZ2UgbG9nXHJcbiAgICBpZiAoYXNzaWduZWRfdGVhbV9tZW1iZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBsZXQgYXNzaWduZWRDb2RlID0gbnVsbDtcclxuICAgICAgaWYgKGFzc2lnbmVkX3RlYW1fbWVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBhc3NpZ25lZF90ZWFtX21lbWJlciA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgY29uc3Qgc3RhZmYgPVxyXG4gICAgICAgICAgICBhd2FpdCBzcWxgU0VMRUNUIGNvZGUsIG5hbWUgRlJPTSBzdGFmZl9tZW1iZXJzIFdIRVJFIGlkID0gJHthc3NpZ25lZF90ZWFtX21lbWJlcn1gO1xyXG4gICAgICAgICAgaWYgKHN0YWZmLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgYXNzaWduZWRDb2RlID0gc3RhZmZbMF0uY29kZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgdHlwZW9mIGFzc2lnbmVkX3RlYW1fbWVtYmVyID09PSBcInN0cmluZ1wiICYmXHJcbiAgICAgICAgICBhc3NpZ25lZF90ZWFtX21lbWJlci5tYXRjaCgvXltBLVpdJC8pXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBhc3NpZ25lZENvZGUgPSBhc3NpZ25lZF90ZWFtX21lbWJlcjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChhc3NpZ25lZENvZGUgIT09IG9sZFByb2plY3QuYXNzaWduZWRfdGVhbV9tZW1iZXIpIHtcclxuICAgICAgICAvLyBHZXQgc3RhZmYgbmFtZXMgZm9yIGxvZ1xyXG4gICAgICAgIGNvbnN0IG9sZFN0YWZmID0gb2xkUHJvamVjdC5hc3NpZ25lZF90ZWFtX21lbWJlclxyXG4gICAgICAgICAgPyBhd2FpdCBzcWxgU0VMRUNUIG5hbWUgRlJPTSBzdGFmZl9tZW1iZXJzIFdIRVJFIGNvZGUgPSAke29sZFByb2plY3QuYXNzaWduZWRfdGVhbV9tZW1iZXJ9YFxyXG4gICAgICAgICAgOiBbXTtcclxuICAgICAgICBjb25zdCBuZXdTdGFmZiA9IGFzc2lnbmVkQ29kZVxyXG4gICAgICAgICAgPyBhd2FpdCBzcWxgU0VMRUNUIG5hbWUgRlJPTSBzdGFmZl9tZW1iZXJzIFdIRVJFIGNvZGUgPSAke2Fzc2lnbmVkQ29kZX1gXHJcbiAgICAgICAgICA6IFtdO1xyXG5cclxuICAgICAgICBjb25zdCBvbGRTdGFmZk5hbWUgPSBvbGRTdGFmZi5sZW5ndGggPiAwID8gb2xkU3RhZmZbMF0ubmFtZSA6IFwi5pyq6Kit5a6aXCI7XHJcbiAgICAgICAgY29uc3QgbmV3U3RhZmZOYW1lID0gbmV3U3RhZmYubGVuZ3RoID4gMCA/IG5ld1N0YWZmWzBdLm5hbWUgOiBcIuacquioreWumlwiO1xyXG5cclxuICAgICAgICBhd2FpdCBzcWxgXHJcbiAgICAgICAgICBJTlNFUlQgSU5UTyBwcm9qZWN0X2FjdGl2aXRpZXMgKHByb2plY3RfaWQsIGFjdGl2aXR5X3R5cGUsIGRlc2NyaXB0aW9uKVxyXG4gICAgICAgICAgVkFMVUVTICgke2lkfSwgJ2Fzc2lnbmVlX3VwZGF0ZScsICR7YOaLheW9k+iAheOBjOOAjCR7b2xkU3RhZmZOYW1lfeOAjeOBi+OCieOAjCR7bmV3U3RhZmZOYW1lfeOAjeOBq+WkieabtOOBleOCjOOBvuOBl+OBn2B9KVxyXG4gICAgICAgIGA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBSZW1hcmtzIGNoYW5nZSBsb2dcclxuICAgIGlmIChyZW1hcmtzICE9PSB1bmRlZmluZWQgJiYgcmVtYXJrcyAhPT0gb2xkUHJvamVjdC5yZW1hcmtzKSB7XHJcbiAgICAgIGF3YWl0IHNxbGBcclxuICAgICAgICBJTlNFUlQgSU5UTyBwcm9qZWN0X2FjdGl2aXRpZXMgKHByb2plY3RfaWQsIGFjdGl2aXR5X3R5cGUsIGRlc2NyaXB0aW9uKVxyXG4gICAgICAgIFZBTFVFUyAoJHtpZH0sICdyZW1hcmtzX3VwZGF0ZScsICR7YOWCmeiAg+OBjOWkieabtOOBleOCjOOBvuOBl+OBn2B9KVxyXG4gICAgICBgO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFByb2R1Y3QgbnVtYmVyIGNoYW5nZSBsb2dcclxuICAgIGlmIChcclxuICAgICAgcHJvZHVjdF9udW1iZXIgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICBwcm9kdWN0X251bWJlciAhPT0gb2xkUHJvamVjdC5wcm9kdWN0X251bWJlclxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IG9sZFByb2R1Y3ROdW1iZXIgPSBvbGRQcm9qZWN0LnByb2R1Y3RfbnVtYmVyIHx8IFwi5pyq6Kit5a6aXCI7XHJcbiAgICAgIGNvbnN0IG5ld1Byb2R1Y3ROdW1iZXIgPSBwcm9kdWN0X251bWJlciB8fCBcIuacquioreWumlwiO1xyXG4gICAgICBhd2FpdCBzcWxgXHJcbiAgICAgICAgSU5TRVJUIElOVE8gcHJvamVjdF9hY3Rpdml0aWVzIChwcm9qZWN0X2lkLCBhY3Rpdml0eV90eXBlLCBkZXNjcmlwdGlvbilcclxuICAgICAgICBWQUxVRVMgKCR7aWR9LCAncHJvZHVjdF9udW1iZXJfdXBkYXRlJywgJHtg6KO95ZOB55Wq5Y+344GM44CMJHtvbGRQcm9kdWN0TnVtYmVyfeOAjeOBi+OCieOAjCR7bmV3UHJvZHVjdE51bWJlcn3jgI3jgavlpInmm7TjgZXjgozjgb7jgZfjgZ9gfSlcclxuICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBRCBudW1iZXIgY2hhbmdlIGxvZ1xyXG4gICAgaWYgKFxyXG4gICAgICBhZF9udW1iZXIgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICBwYXJzZUludChhZF9udW1iZXIpICE9PSBvbGRQcm9qZWN0LmFkX251bWJlclxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IG9sZEFkTnVtYmVyID0gb2xkUHJvamVjdC5hZF9udW1iZXIgfHwgXCLmnKroqK3lrppcIjtcclxuICAgICAgY29uc3QgbmV3QWROdW1iZXIgPSBhZF9udW1iZXIgfHwgXCLmnKroqK3lrppcIjtcclxuXHJcbiAgICAgIGF3YWl0IHNxbGBcclxuICAgICAgICBJTlNFUlQgSU5UTyBwcm9qZWN0X2FjdGl2aXRpZXMgKHByb2plY3RfaWQsIGFjdGl2aXR5X3R5cGUsIGRlc2NyaXB0aW9uKVxyXG4gICAgICAgIFZBTFVFUyAoJHtpZH0sICdhZF9udW1iZXJfdXBkYXRlJywgJHtgQUTnlarlj7fjgYzjgIwke29sZEFkTnVtYmVyfeOAjeOBi+OCieOAjCR7bmV3QWROdW1iZXJ944CN44Gr5aSJ5pu044GV44KM44G+44GX44GfYH0pXHJcbiAgICAgIGA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRXN0aW1hdGVkIGFtb3VudCBjaGFuZ2UgbG9nXHJcbiAgICBpZiAoXHJcbiAgICAgIGVzdGltYXRlZF9hbW91bnQgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICBwYXJzZUZsb2F0KGVzdGltYXRlZF9hbW91bnQgfHwgMCkgIT09XHJcbiAgICAgICAgcGFyc2VGbG9hdChvbGRQcm9qZWN0LmVzdGltYXRlZF9hbW91bnQgfHwgMClcclxuICAgICkge1xyXG4gICAgICBjb25zdCBvbGRBbW91bnQgPSBvbGRQcm9qZWN0LmVzdGltYXRlZF9hbW91bnRcclxuICAgICAgICA/IGDCpSR7TnVtYmVyKG9sZFByb2plY3QuZXN0aW1hdGVkX2Ftb3VudCkudG9Mb2NhbGVTdHJpbmcoKX1gXHJcbiAgICAgICAgOiBcIuacquioreWumlwiO1xyXG4gICAgICBjb25zdCBuZXdBbW91bnQgPSBlc3RpbWF0ZWRfYW1vdW50XHJcbiAgICAgICAgPyBgwqUke051bWJlcihlc3RpbWF0ZWRfYW1vdW50KS50b0xvY2FsZVN0cmluZygpfWBcclxuICAgICAgICA6IFwi5pyq6Kit5a6aXCI7XHJcblxyXG4gICAgICBhd2FpdCBzcWxgXHJcbiAgICAgICAgSU5TRVJUIElOVE8gcHJvamVjdF9hY3Rpdml0aWVzIChwcm9qZWN0X2lkLCBhY3Rpdml0eV90eXBlLCBkZXNjcmlwdGlvbilcclxuICAgICAgICBWQUxVRVMgKCR7aWR9LCAnZXN0aW1hdGVkX2Ftb3VudF91cGRhdGUnLCAke2DopovnqY3poY3jgYzjgIwke29sZEFtb3VudH3jgI3jgYvjgonjgIwke25ld0Ftb3VudH3jgI3jgavlpInmm7TjgZXjgozjgb7jgZfjgZ9gfSlcclxuICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbih1cGRhdGVkUHJvamVjdCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBwcm9qZWN0OlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogXCJGYWlsZWQgdG8gdXBkYXRlIHByb2plY3RcIiB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH0sXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShyZXF1ZXN0LCB7IHBhcmFtcyB9KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgaWQgfSA9IHBhcmFtcztcclxuXHJcbiAgICAvLyBDaGVjayBpZiBwcm9qZWN0IGV4aXN0c1xyXG4gICAgY29uc3QgZXhpc3RpbmdQcm9qZWN0ID0gYXdhaXQgc3FsYFxyXG4gICAgICBTRUxFQ1QgKiBGUk9NIHByb2plY3RzIFdIRVJFIGlkID0gJHtpZH1cclxuICAgIGA7XHJcblxyXG4gICAgaWYgKGV4aXN0aW5nUHJvamVjdC5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJQcm9qZWN0IG5vdCBmb3VuZFwiIH0sIHsgc3RhdHVzOiA0MDQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVsZXRlIHByb2plY3QgKGNhc2NhZGVzIHRvIHJlbGF0ZWQgdGFibGVzKVxyXG4gICAgYXdhaXQgc3FsYERFTEVURSBGUk9NIHByb2plY3RzIFdIRVJFIGlkID0gJHtpZH1gO1xyXG5cclxuICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogXCJQcm9qZWN0IGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyBwcm9qZWN0OlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogXCJGYWlsZWQgdG8gZGVsZXRlIHByb2plY3RcIiB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH0sXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuXHJcblxyXG4iXSwibmFtZXMiOlsic3FsIiwiR0VUIiwicmVxdWVzdCIsInBhcmFtcyIsImlkIiwicHJvamVjdCIsImxlbmd0aCIsIlJlc3BvbnNlIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwibWlsZXN0b25lcyIsImFjdGl2aXRpZXMiLCJkb2N1bWVudHMiLCJwcm9qZWN0RGF0YSIsImNvbnNvbGUiLCJQVVQiLCJib2R5IiwiYWRfbnVtYmVyIiwicHJvamVjdF9uYW1lIiwiY2xpZW50X25hbWUiLCJpbnF1aXJ5X2RhdGUiLCJjb21wbGV0aW9uX3BlcmNlbnRhZ2UiLCJhc3NpZ25lZF90ZWFtX21lbWJlciIsImRlbGl2ZXJ5X2RhdGUiLCJpbnN0YWxsYXRpb25fZGF0ZSIsImluc3RhbGxhdGlvbl9jb250cmFjdG9yIiwicmVtYXJrcyIsInByb2R1Y3RfbnVtYmVyIiwiYWRkcmVzcyIsInBob25lX251bWJlciIsImVzdGltYXRlZF9hbW91bnQiLCJjb21wYW55X2FkZHJlc3MiLCJjb250YWN0X3BlcnNvbiIsImVtYWlsIiwiZXhpc3RpbmdQcm9qZWN0Iiwib2xkUHJvamVjdCIsImNsaWVudElkIiwiY2xpZW50X2lkIiwiY2xpZW50RmllbGRzQ2hhbmdlZCIsInVuZGVmaW5lZCIsImN1cnJlbnRfY2xpZW50X25hbWUiLCJjdXJyZW50X2NvbXBhbnlfYWRkcmVzcyIsImN1cnJlbnRfcGhvbmVfbnVtYmVyIiwiY3VycmVudF9jb250YWN0X3BlcnNvbiIsImN1cnJlbnRfZW1haWwiLCJjbGllbnRVcGRhdGVzIiwiY2xpZW50VmFsdWVzIiwiY2xpZW50UGFyYW1Db3VudCIsInB1c2giLCJEYXRlIiwidG9JU09TdHJpbmciLCJjbGllbnRVcGRhdGVRdWVyeSIsImpvaW4iLCJjbGllbnRSZXN1bHQiLCJ1cGRhdGVzIiwidmFsdWVzIiwicGFyYW1Db3VudCIsInBhcnNlSW50IiwicGFyc2VGbG9hdCIsInVwZGF0ZWRQcm9qZWN0IiwidXBkYXRlUXVlcnkiLCJyZXN1bHQiLCJvbGRDb250YWN0IiwibmV3Q29udGFjdCIsIm9sZEVtYWlsIiwibmV3RW1haWwiLCJvbGRDb21wYW55QWRkcmVzcyIsIm5ld0NvbXBhbnlBZGRyZXNzIiwib2xkUGhvbmUiLCJuZXdQaG9uZSIsIm9sZEFkZHJlc3MiLCJuZXdBZGRyZXNzIiwib2xkRGF0ZSIsInNwbGl0IiwibmV3RGF0ZSIsIm9sZERhdGVTdHIiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJuZXdEYXRlU3RyIiwib2xkQ29udHJhY3RvciIsIm5ld0NvbnRyYWN0b3IiLCJhc3NpZ25lZENvZGUiLCJzdGFmZiIsImNvZGUiLCJtYXRjaCIsIm9sZFN0YWZmIiwibmV3U3RhZmYiLCJvbGRTdGFmZk5hbWUiLCJuYW1lIiwibmV3U3RhZmZOYW1lIiwib2xkUHJvZHVjdE51bWJlciIsIm5ld1Byb2R1Y3ROdW1iZXIiLCJvbGRBZE51bWJlciIsIm5ld0FkTnVtYmVyIiwib2xkQW1vdW50IiwiTnVtYmVyIiwidG9Mb2NhbGVTdHJpbmciLCJuZXdBbW91bnQiLCJERUxFVEUiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/projects/[id]/route.js\n");

/***/ }),

/***/ "(rsc)/./src/app/api/utils/sql.js":
/*!**********************************!*\
  !*** ./src/app/api/utils/sql.js ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_db__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_db__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// apps/web/src/app/api/utils/sql.js\n\n/**\r\n * sql`SELECT * FROM table WHERE id = ${id}`\r\n * または\r\n * sql(\"SELECT * FROM table WHERE id = $1\", [id])\r\n * のどちらでも使えるラッパー。\r\n * 戻り値は rows の配列。\r\n */ async function sql(stringsOrText, ...values) {\n    // 1) テンプレートリテラル形式 sql`...`\n    if (Array.isArray(stringsOrText) && Object.prototype.hasOwnProperty.call(stringsOrText, \"raw\")) {\n        const strings = stringsOrText;\n        const params = [];\n        let text = \"\";\n        strings.forEach((str, i)=>{\n            text += str;\n            if (i < values.length) {\n                text += `$${i + 1}`;\n                params.push(values[i]);\n            }\n        });\n        const { rows } = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(text, params);\n        return rows;\n    }\n    // 2) 関数形式 sql(\"SELECT ... WHERE id = $1\", [id])\n    const text = stringsOrText;\n    const params = values[0] || [];\n    const { rows } = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(text, params);\n    return rows;\n}\n// いちおう transaction を呼ばれても落ちないようにダミー実装\nsql.transaction = async (fn)=>{\n    // 本格的なトランザクションは使っていない想定。\n    // 必要になったら db.js 側で client をエクスポートして対応する。\n    return fn({\n        query: _lib_db__WEBPACK_IMPORTED_MODULE_0__.query\n    });\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (sql);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS91dGlscy9zcWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxvQ0FBb0M7QUFDSDtBQUVqQzs7Ozs7O0NBTUMsR0FDRCxlQUFlQyxJQUFJQyxhQUFhLEVBQUUsR0FBR0MsTUFBTTtJQUN6QywyQkFBMkI7SUFDM0IsSUFBSUMsTUFBTUMsT0FBTyxDQUFDSCxrQkFBa0JJLE9BQU9DLFNBQVMsQ0FBQ0MsY0FBYyxDQUFDQyxJQUFJLENBQUNQLGVBQWUsUUFBUTtRQUM5RixNQUFNUSxVQUFVUjtRQUNoQixNQUFNUyxTQUFTLEVBQUU7UUFDakIsSUFBSUMsT0FBTztRQUVYRixRQUFRRyxPQUFPLENBQUMsQ0FBQ0MsS0FBS0M7WUFDcEJILFFBQVFFO1lBQ1IsSUFBSUMsSUFBSVosT0FBT2EsTUFBTSxFQUFFO2dCQUNyQkosUUFBUSxDQUFDLENBQUMsRUFBRUcsSUFBSSxFQUFFLENBQUM7Z0JBQ25CSixPQUFPTSxJQUFJLENBQUNkLE1BQU0sQ0FBQ1ksRUFBRTtZQUN2QjtRQUNGO1FBRUEsTUFBTSxFQUFFRyxJQUFJLEVBQUUsR0FBRyxNQUFNbEIsOENBQUtBLENBQUNZLE1BQU1EO1FBQ25DLE9BQU9PO0lBQ1Q7SUFFQSxnREFBZ0Q7SUFDaEQsTUFBTU4sT0FBT1Y7SUFDYixNQUFNUyxTQUFTUixNQUFNLENBQUMsRUFBRSxJQUFJLEVBQUU7SUFDOUIsTUFBTSxFQUFFZSxJQUFJLEVBQUUsR0FBRyxNQUFNbEIsOENBQUtBLENBQUNZLE1BQU1EO0lBQ25DLE9BQU9PO0FBQ1Q7QUFFQSxzQ0FBc0M7QUFDdENqQixJQUFJa0IsV0FBVyxHQUFHLE9BQU9DO0lBQ3ZCLHlCQUF5QjtJQUN6Qix5Q0FBeUM7SUFDekMsT0FBT0EsR0FBRztRQUFFcEIsS0FBS0EsNENBQUFBO0lBQUM7QUFDcEI7QUFFQSxpRUFBZUMsR0FBR0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FuLWthbi13ZWIvLi9zcmMvYXBwL2FwaS91dGlscy9zcWwuanM/MTdkYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBhcHBzL3dlYi9zcmMvYXBwL2FwaS91dGlscy9zcWwuanNcclxuaW1wb3J0IHsgcXVlcnkgfSBmcm9tIFwiQC9saWIvZGJcIjtcclxuXHJcbi8qKlxyXG4gKiBzcWxgU0VMRUNUICogRlJPTSB0YWJsZSBXSEVSRSBpZCA9ICR7aWR9YFxyXG4gKiDjgb7jgZ/jga9cclxuICogc3FsKFwiU0VMRUNUICogRlJPTSB0YWJsZSBXSEVSRSBpZCA9ICQxXCIsIFtpZF0pXHJcbiAqIOOBruOBqeOBoeOCieOBp+OCguS9v+OBiOOCi+ODqeODg+ODkeODvOOAglxyXG4gKiDmiLvjgorlgKTjga8gcm93cyDjga7phY3liJfjgIJcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNxbChzdHJpbmdzT3JUZXh0LCAuLi52YWx1ZXMpIHtcclxuICAvLyAxKSDjg4bjg7Pjg5fjg6zjg7zjg4jjg6rjg4bjg6njg6vlvaLlvI8gc3FsYC4uLmBcclxuICBpZiAoQXJyYXkuaXNBcnJheShzdHJpbmdzT3JUZXh0KSAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc3RyaW5nc09yVGV4dCwgXCJyYXdcIikpIHtcclxuICAgIGNvbnN0IHN0cmluZ3MgPSBzdHJpbmdzT3JUZXh0O1xyXG4gICAgY29uc3QgcGFyYW1zID0gW107XHJcbiAgICBsZXQgdGV4dCA9IFwiXCI7XHJcblxyXG4gICAgc3RyaW5ncy5mb3JFYWNoKChzdHIsIGkpID0+IHtcclxuICAgICAgdGV4dCArPSBzdHI7XHJcbiAgICAgIGlmIChpIDwgdmFsdWVzLmxlbmd0aCkge1xyXG4gICAgICAgIHRleHQgKz0gYCQke2kgKyAxfWA7XHJcbiAgICAgICAgcGFyYW1zLnB1c2godmFsdWVzW2ldKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgeyByb3dzIH0gPSBhd2FpdCBxdWVyeSh0ZXh0LCBwYXJhbXMpO1xyXG4gICAgcmV0dXJuIHJvd3M7XHJcbiAgfVxyXG5cclxuICAvLyAyKSDplqLmlbDlvaLlvI8gc3FsKFwiU0VMRUNUIC4uLiBXSEVSRSBpZCA9ICQxXCIsIFtpZF0pXHJcbiAgY29uc3QgdGV4dCA9IHN0cmluZ3NPclRleHQ7XHJcbiAgY29uc3QgcGFyYW1zID0gdmFsdWVzWzBdIHx8IFtdO1xyXG4gIGNvbnN0IHsgcm93cyB9ID0gYXdhaXQgcXVlcnkodGV4dCwgcGFyYW1zKTtcclxuICByZXR1cm4gcm93cztcclxufVxyXG5cclxuLy8g44GE44Gh44GK44GGIHRyYW5zYWN0aW9uIOOCkuWRvOOBsOOCjOOBpuOCguiQveOBoeOBquOBhOOCiOOBhuOBq+ODgOODn+ODvOWun+ijhVxyXG5zcWwudHJhbnNhY3Rpb24gPSBhc3luYyAoZm4pID0+IHtcclxuICAvLyDmnKzmoLznmoTjgarjg4jjg6njg7Pjgrbjgq/jgrfjg6fjg7Pjga/kvb/jgaPjgabjgYTjgarjgYTmg7PlrprjgIJcclxuICAvLyDlv4XopoHjgavjgarjgaPjgZ/jgokgZGIuanMg5YG044GnIGNsaWVudCDjgpLjgqjjgq/jgrnjg53jg7zjg4jjgZfjgablr77lv5zjgZnjgovjgIJcclxuICByZXR1cm4gZm4oeyBxdWVyeSB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHNxbDtcclxuXHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJxdWVyeSIsInNxbCIsInN0cmluZ3NPclRleHQiLCJ2YWx1ZXMiLCJBcnJheSIsImlzQXJyYXkiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJzdHJpbmdzIiwicGFyYW1zIiwidGV4dCIsImZvckVhY2giLCJzdHIiLCJpIiwibGVuZ3RoIiwicHVzaCIsInJvd3MiLCJ0cmFuc2FjdGlvbiIsImZuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/utils/sql.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.js":
/*!***********************!*\
  !*** ./src/lib/db.js ***!
  \***********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   query: () => (/* binding */ query)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// src/lib/db.js\n\nconst connectionString = process.env.DATABASE_URL;\n// 開発中にホットリロードで Pool が増殖しないようにするおまじない\nlet _pool;\nif (!global._pgPool) {\n    global._pgPool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n        connectionString\n    });\n}\n_pool = global._pgPool;\nasync function query(text, params) {\n    const client = await _pool.connect();\n    try {\n        const res = await client.query(text, params);\n        return res;\n    } finally{\n        client.release();\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsZ0JBQWdCO0FBQ1U7QUFFMUIsTUFBTUMsbUJBQW1CQyxRQUFRQyxHQUFHLENBQUNDLFlBQVk7QUFFakQscUNBQXFDO0FBQ3JDLElBQUlDO0FBRUosSUFBSSxDQUFDQyxPQUFPQyxPQUFPLEVBQUU7SUFDbkJELE9BQU9DLE9BQU8sR0FBRyxJQUFJUCxvQ0FBSUEsQ0FBQztRQUN4QkM7SUFFRjtBQUNGO0FBRUFJLFFBQVFDLE9BQU9DLE9BQU87QUFFZixlQUFlQyxNQUFNQyxJQUFJLEVBQUVDLE1BQU07SUFDdEMsTUFBTUMsU0FBUyxNQUFNTixNQUFNTyxPQUFPO0lBQ2xDLElBQUk7UUFDRixNQUFNQyxNQUFNLE1BQU1GLE9BQU9ILEtBQUssQ0FBQ0MsTUFBTUM7UUFDckMsT0FBT0c7SUFDVCxTQUFVO1FBQ1JGLE9BQU9HLE9BQU87SUFDaEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FuLWthbi13ZWIvLi9zcmMvbGliL2RiLmpzPzdmOWEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9kYi5qc1xyXG5pbXBvcnQgeyBQb29sIH0gZnJvbSBcInBnXCI7XHJcblxyXG5jb25zdCBjb25uZWN0aW9uU3RyaW5nID0gcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMO1xyXG5cclxuLy8g6ZaL55m65Lit44Gr44Ob44OD44OI44Oq44Ot44O844OJ44GnIFBvb2wg44GM5aKX5q6W44GX44Gq44GE44KI44GG44Gr44GZ44KL44GK44G+44GY44Gq44GEXHJcbmxldCBfcG9vbDtcclxuXHJcbmlmICghZ2xvYmFsLl9wZ1Bvb2wpIHtcclxuICBnbG9iYWwuX3BnUG9vbCA9IG5ldyBQb29sKHtcclxuICAgIGNvbm5lY3Rpb25TdHJpbmcsXHJcbiAgICAvLyDlv4XopoHjgarjgokgc3NsOiB7IHJlamVjdFVuYXV0aG9yaXplZDogZmFsc2UgfSDjgpLku5jjgZHjgovvvIhSYWlsd2F544Gu6Kit5a6a5qyh56ys77yJXHJcbiAgfSk7XHJcbn1cclxuXHJcbl9wb29sID0gZ2xvYmFsLl9wZ1Bvb2w7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcXVlcnkodGV4dCwgcGFyYW1zKSB7XHJcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgX3Bvb2wuY29ubmVjdCgpO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBjbGllbnQucXVlcnkodGV4dCwgcGFyYW1zKTtcclxuICAgIHJldHVybiByZXM7XHJcbiAgfSBmaW5hbGx5IHtcclxuICAgIGNsaWVudC5yZWxlYXNlKCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJQb29sIiwiY29ubmVjdGlvblN0cmluZyIsInByb2Nlc3MiLCJlbnYiLCJEQVRBQkFTRV9VUkwiLCJfcG9vbCIsImdsb2JhbCIsIl9wZ1Bvb2wiLCJxdWVyeSIsInRleHQiLCJwYXJhbXMiLCJjbGllbnQiLCJjb25uZWN0IiwicmVzIiwicmVsZWFzZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprojects%2F%5Bid%5D%2Froute&page=%2Fapi%2Fprojects%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprojects%2F%5Bid%5D%2Froute.js&appDir=C%3A%5CUsers%5CDELL%5CDesktop%5C%E4%BD%9C%E6%88%90%E3%82%A2%E3%83%97%E3%83%AA%5CAN-KAN%5Capps%5Cweb%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDELL%5CDesktop%5C%E4%BD%9C%E6%88%90%E3%82%A2%E3%83%97%E3%83%AA%5CAN-KAN%5Capps%5Cweb&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();